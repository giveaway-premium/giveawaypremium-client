{"ast":null,"code":"import _Reflect$construct from \"@babel/runtime-corejs2/core-js/reflect/construct\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = _Reflect$construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !_Reflect$construct) return false; if (_Reflect$construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(_Reflect$construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { withRouter } from 'next/router';\nimport { connect } from 'react-redux';\nimport { Form, Row, Col, Input, Button, Descriptions, Divider, DatePicker, Select } from 'antd';\nimport { images } from \"../../../../../config/images\";\nimport MyModal from \"../../../../Components/MyModal\";\nimport { showNotification } from \"../../../../../common/function\";\nimport { LoadingOutlined, CheckCircleFilled } from '@ant-design/icons';\nimport { Router } from \"../../../../../common/routes\";\nimport { isMobile } from 'react-device-detect';\nimport \"./style.scss\";\nimport Lottie from 'react-lottie';\nimport GapService from \"../../../../../controller/Api/Services/Gap\";\nimport moment from 'moment';\nvar Option = Select.Option;\nvar dateFormat = 'DD-MM-YYYY';\n\nvar Consignment = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(Consignment, _React$PureComponent);\n\n  var _super = _createSuper(Consignment);\n\n  function Consignment(props) {\n    var _this;\n\n    _classCallCheck(this, Consignment);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchAllTags\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this.setState({\n                isLoadingTags: true\n              }, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                var res;\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return GapService.getConsignmentID();\n\n                      case 2:\n                        res = _context.sent;\n\n                        if (res && res.results && res.results.length > 0) {\n                          _this.setState({\n                            allInfoTag: res.results.reverse(),\n                            isLoadingTags: false\n                          }, console.log(_this.state));\n                        } else {\n                          _this.setState({\n                            isLoadingTags: false\n                          });\n                        }\n\n                      case 4:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              })));\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"onConsign\", function () {\n      var userData = _this.props.userData;\n      var _this$state = _this.state,\n          isFoundUser = _this$state.isFoundUser,\n          objectIdFoundUser = _this$state.objectIdFoundUser,\n          formData = _this$state.formData,\n          timeGroupId = _this$state.timeGroupId;\n      console.log(userData);\n\n      _this.setState({\n        isConsigning: true\n      }, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var result, customerFormData, resCus, _result;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                console.log('onConsign');\n                console.log(formData);\n                console.log(_this.state);\n\n                if (!(isFoundUser && objectIdFoundUser)) {\n                  _context4.next = 12;\n                  break;\n                }\n\n                // for already user\n                console.log('for already user');\n                _context4.next = 7;\n                return GapService.setConsignment(formData, userData.objectId, objectIdFoundUser, timeGroupId);\n\n              case 7:\n                result = _context4.sent;\n                console.log(result);\n\n                if (result && result.objectId) {\n                  _this.setState({\n                    isShowConfirmForm: true,\n                    isConsigning: false\n                  }, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n                    var customerFormData;\n                    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                      while (1) {\n                        switch (_context3.prev = _context3.next) {\n                          case 0:\n                            customerFormData = {\n                              consignerName: formData.consignerName,\n                              phoneNumber: formData.phoneNumber,\n                              consignerIdCard: formData.consignerIdCard,\n                              mail: formData.mail,\n                              email: formData.mail || 'nothing@giveaway.com',\n                              birthday: formData.birthday,\n                              bankName: formData.bankName,\n                              bankId: formData.bankId\n                            };\n                            console.log('udpate user');\n                            console.log(customerFormData);\n                            console.log(objectIdFoundUser);\n                            GapService.updateCustomer(customerFormData, objectIdFoundUser);\n\n                          case 5:\n                          case \"end\":\n                            return _context3.stop();\n                        }\n                      }\n                    }, _callee3);\n                  })));\n                } else {\n                  showNotification('Tạo Đơn Ký gửi thất bại');\n                }\n\n                _context4.next = 30;\n                break;\n\n              case 12:\n                // for new user\n                console.log('for new user');\n                customerFormData = {\n                  consignerName: formData.consignerName,\n                  phoneNumber: formData.phoneNumber,\n                  consignerIdCard: formData.consignerIdCard,\n                  mail: formData.mail,\n                  email: formData.mail || 'nothing@giveaway.com',\n                  username: formData.phoneNumber,\n                  password: formData.consignerIdCard,\n                  birthday: formData.birthday,\n                  bankName: formData.bankName,\n                  bankId: formData.bankId\n                };\n                console.log('create user');\n                console.log(customerFormData);\n                _context4.next = 18;\n                return GapService.setCustomer(customerFormData);\n\n              case 18:\n                resCus = _context4.sent;\n                console.log(resCus);\n\n                if (!(resCus && resCus.objectId)) {\n                  _context4.next = 29;\n                  break;\n                }\n\n                showNotification('Thêm khách hàng thành công');\n                _context4.next = 24;\n                return GapService.setConsignment(formData, userData.objectId, resCus.objectId, timeGroupId);\n\n              case 24:\n                _result = _context4.sent;\n                console.log(_result);\n\n                if (_result && _result.objectId) {\n                  _this.setState({\n                    isShowConfirmForm: true,\n                    isConsigning: false\n                  });\n                }\n\n                _context4.next = 30;\n                break;\n\n              case 29:\n                showNotification('Tạo khách hàng thất bại');\n\n              case 30:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      })));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchUserByPhoneNumber\", /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(phoneKey) {\n        var formData, res;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                formData = _this.state.formData;\n                console.log('phoneKey.target.value');\n                console.log(phoneKey.target.value);\n\n                if (!(phoneKey && phoneKey.target && phoneKey.target.value && phoneKey.target.value.length >= 10)) {\n                  _context5.next = 14;\n                  break;\n                }\n\n                console.log('fetchUserByPhoneNumber run');\n\n                _this.setState({\n                  isLoadingUser: true\n                });\n\n                _context5.next = 8;\n                return GapService.getCustomer(phoneKey.target.value);\n\n              case 8:\n                res = _context5.sent;\n                console.log('fetchUserByPhoneNumber finish');\n                console.log(res);\n\n                if (res && res.results && res.results[0]) {\n                  console.log('fetchUserByPhoneNumber set form');\n\n                  _this.setState({\n                    formData: _objectSpread({}, _this.state.formData, {\n                      consignerName: res.results[0].fullName,\n                      phoneNumber: res.results[0].phoneNumber,\n                      consignerIdCard: res.results[0].identityNumber,\n                      mail: res.results[0].mail,\n                      birthday: res.results[0].birthday,\n                      bankName: res.results[0].banks[0] ? res.results[0].banks[0].type : '',\n                      bankId: res.results[0].banks[0] ? res.results[0].banks[0].accNumber : '',\n                      numberOfConsignment: res.results[0].numberOfConsignment || 0,\n                      numberOfConsignmentTime: res.results[0].numberOfConsignmentTime || 0\n                    }),\n                    birthday: res.results[0].birthday,\n                    isFoundUser: true,\n                    isLoadingUser: false,\n                    objectIdFoundUser: res.results[0].objectId\n                  }, function () {\n                    console.log(_this.state);\n                  });\n                } else {\n                  _this.setState({\n                    isFoundUser: false,\n                    isLoadingUser: false\n                  });\n                }\n\n                _context5.next = 15;\n                break;\n\n              case 14:\n                if (phoneKey && phoneKey.target && phoneKey.target.value && phoneKey.target.value.length < 10) {\n                  console.log('fetchUserByPhoneNumber == 0'); // this.onRefeshAll()\n\n                  _this.setState({\n                    formData: _objectSpread({}, _this.state.formData, {\n                      consignerName: '',\n                      phoneNumber: phoneKey.target.value,\n                      consignerIdCard: '',\n                      mail: '',\n                      birthday: moment(),\n                      bankName: '',\n                      bankId: '',\n                      consignmentId: ''\n                    }),\n                    objectIdFoundUser: '',\n                    birthday: moment(),\n                    isShowConfirmForm: false,\n                    isFoundUser: false\n                  }); // this.setState({\n                  //   allInfoTag: [],\n                  //   formData: {\n                  //     consigneeName: this.props.userData.name || '',\n                  //     consignerName: '',\n                  //     phoneNumber: phoneKey.target.value,\n                  //     consignerIdCard: '',\n                  //     mail: '',\n                  //     birthday: moment(),\n                  //     bankName: '',\n                  //     bankId: '',\n                  //     numberOfProducts: 1,\n                  //     consignmentId: '',\n                  //     timeGetMoney: moment().format('MM-YYYY'),\n                  //     numberOfConsignmentTime: 0,\n                  //     numberOfConsignment: 0\n                  //   },\n                  //   isLoadingTags: false,\n                  //   objectIdFoundUser: '',\n                  //   birthday: moment(),\n                  //   isConsigning: false,\n                  //   isShowConfirmForm: false,\n                  //   isFoundUser: false,\n                  //   isLoadingUser: false\n                  // })\n\n                } else {\n                  console.log('fetchUserByPhoneNumber dont run 2');\n\n                  _this.setState({\n                    formData: _objectSpread({}, _this.state.formData, {\n                      consignerName: '',\n                      phoneNumber: phoneKey.target.value,\n                      consignerIdCard: '',\n                      mail: '',\n                      birthday: moment(),\n                      bankName: '',\n                      bankId: '',\n                      consignmentId: ''\n                    }),\n                    objectIdFoundUser: '',\n                    birthday: moment(),\n                    isShowConfirmForm: false,\n                    isFoundUser: false\n                  }); // this.onRefeshAll()\n\n                }\n\n              case 15:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      return function (_x) {\n        return _ref5.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"onRefeshAll\", function () {\n      _this.setState({\n        allInfoTag: [],\n        formData: {\n          consigneeName: _this.props.userData.name || '',\n          consignerName: '',\n          phoneNumber: '',\n          consignerIdCard: '',\n          mail: '',\n          birthday: moment(),\n          bankName: '',\n          bankId: '',\n          numberOfProducts: 1,\n          consignmentId: '',\n          timeGetMoney: moment().format('MM-YYYY'),\n          numberOfConsignmentTime: 0,\n          numberOfConsignment: 0\n        },\n        isLoadingTags: false,\n        objectIdFoundUser: '',\n        birthday: moment(),\n        isConsigning: false,\n        isShowConfirmForm: false,\n        isFoundUser: false,\n        isLoadingUser: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeBirthday\", function (value) {\n      try {\n        var formatTime = moment(value).format('DD-MM-YYYY');\n        console.log(formatTime);\n        console.log(value);\n\n        _this.setState({\n          formData: _objectSpread({}, _this.state.formData, {\n            birthday: formatTime\n          }),\n          birthday: formatTime\n        }, function () {\n          console.log(_this.state);\n        });\n      } catch (e) {\n        console.log(e);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeData\", function (value) {\n      console.log(value.target.id);\n      var formData = _this.state.formData;\n\n      _this.setState({\n        formData: _objectSpread({}, formData, _defineProperty({}, value.target.id, value.target.value))\n      }, function () {\n        return console.log(_this.state);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeTimeGetMoney\", function (value) {\n      var _this$state2 = _this.state,\n          formData = _this$state2.formData,\n          allInfoTag = _this$state2.allInfoTag;\n      console.log('onChangeTimeGetMoney');\n      console.log(value);\n      var findTag = allInfoTag.filter(function (tag) {\n        return tag.code === value;\n      });\n\n      if (findTag && findTag[0]) {\n        _this.setState({\n          formData: _objectSpread({}, formData, {\n            timeGetMoney: findTag[0].timeGetMoney\n          }),\n          timeGroupId: findTag[0].code\n        }, function () {\n          console.log(_this.state);\n        });\n      }\n    });\n\n    _this.state = {\n      allInfoTag: [],\n      formData: {\n        consigneeName: _this.props.userData.name || '',\n        consignerName: '',\n        phoneNumber: '',\n        consignerIdCard: '',\n        mail: '',\n        birthday: moment(),\n        bankName: '',\n        bankId: '',\n        numberOfProducts: 1,\n        consignmentId: '',\n        timeGetMoney: moment().format('DD-MM-YYYY'),\n        numberOfConsignmentTime: 0,\n        numberOfConsignment: 0\n      },\n      isLoadingTags: false,\n      objectIdFoundUser: '',\n      birthday: moment(),\n      isConsigning: false,\n      isShowConfirmForm: false,\n      isFoundUser: false,\n      isLoadingUser: false\n    };\n    _this.formRef = /*#__PURE__*/React.createRef();\n    _this.myModal = /*#__PURE__*/React.createRef();\n    return _this;\n  }\n\n  _createClass(Consignment, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchAllTags();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var userData = this.props.userData;\n      var _this$state3 = this.state,\n          formData = _this$state3.formData,\n          isConsigning = _this$state3.isConsigning,\n          isShowConfirmForm = _this$state3.isShowConfirmForm,\n          birthday = _this$state3.birthday,\n          isLoadingUser = _this$state3.isLoadingUser,\n          isFoundUser = _this$state3.isFoundUser,\n          isLoadingTags = _this$state3.isLoadingTags,\n          allInfoTag = _this$state3.allInfoTag;\n      var layout = {\n        labelCol: {\n          span: 9\n        },\n        wrapperCol: {\n          span: 15\n        }\n      }; // const defaultOptions = {\n      //   loop: false,\n      //   autoplay: true,\n      //   animationData: images.consignmentForm\n      // }\n\n      var defaultOptionsSuccess = {\n        loop: false,\n        autoplay: true,\n        animationData: images.successJson\n      };\n      return __jsx(\"div\", {\n        className: \"consignment-container\"\n      }, isShowConfirmForm ? __jsx(React.Fragment, null, __jsx(Lottie, {\n        options: defaultOptionsSuccess,\n        height: 150,\n        width: 150,\n        isStopped: false,\n        isPaused: false\n      }), __jsx(Row, {\n        justify: \"center\"\n      }, __jsx(Col, {\n        span: 20\n      }, __jsx(Descriptions, null, __jsx(Descriptions.Item, {\n        span: 24,\n        label: \"M\\xE3 K\\xFD g\\u1EEDi\"\n      }, formData.consignmentId), __jsx(Descriptions.Item, {\n        span: 24,\n        label: \"S\\u1ED1 l\\u01B0\\u1EE3ng H\\xE0ng Ho\\xE1\"\n      }, formData.numberOfProducts), __jsx(Descriptions.Item, {\n        span: 24,\n        label: \"Ng\\xE0y tr\\u1EA3 ti\\u1EC1n\"\n      }, formData.timeGetMoney), __jsx(Descriptions.Item, {\n        span: 24,\n        label: \"T\\xEAn Kh\\xE1ch H\\xE0ng\"\n      }, formData.consignerName), __jsx(Descriptions.Item, {\n        span: 24,\n        label: \"T\\xEAn Nh\\xE2n Vi\\xEAn\"\n      }, formData.consigneeName), __jsx(Descriptions.Item, {\n        span: 24,\n        label: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"\n      }, formData.phoneNumber), __jsx(Descriptions.Item, {\n        span: 24,\n        label: \"Email\"\n      }, formData.mail), __jsx(Descriptions.Item, {\n        span: 24,\n        label: \"Ng\\xE2n h\\xE0ng\"\n      }, formData.bankName), __jsx(Descriptions.Item, {\n        span: 24,\n        label: \"ID Ng\\xE2n h\\xE0ng\"\n      }, formData.bankId), __jsx(Descriptions.Item, {\n        span: 24,\n        label: \"Ch\\u1EE9ng minh th\\u01B0\"\n      }, formData.consignerIdCard), __jsx(Descriptions.Item, {\n        span: 24,\n        label: \"Sinh nh\\u1EADt\"\n      }, moment(formData.birthday).format('DD-MM-YYYY'))))), __jsx(Button, {\n        className: \"MT20\",\n        onClick: this.onRefeshAll\n      }, \"Quay l\\u1EA1i\")) : __jsx(React.Fragment, null, __jsx(Form, _extends({\n        ref: this.formRef\n      }, layout, {\n        name: \"consignment\",\n        initialValues: formData // onFinish={this.onFinish}\n        ,\n        onFinish: this.onConsign,\n        onValuesChange: function onValuesChange(changedValues, allValues) {\n          console.log(changedValues);\n\n          _this2.setState({\n            formData: _objectSpread({}, formData, changedValues)\n          }, function () {\n            return console.log(_this2.state);\n          });\n        }\n      }), __jsx(Row, {\n        className: \"flex sell-card-form PT40 PB35\",\n        justify: \"center\"\n      }, __jsx(Form.Item, {\n        name: \"phoneNumber\",\n        rules: [{\n          required: true,\n          message: 'Vui lòng nhập số điện thoại'\n        }],\n        label: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"\n      }, __jsx(Col, {\n        sm: 24,\n        md: 12\n      }, __jsx(Input, {\n        value: formData.phoneNumber,\n        maxLength: 12,\n        allowClear: true,\n        onChange: this.fetchUserByPhoneNumber,\n        style: {\n          minWidth: 100\n        },\n        placeholder: \"...\",\n        suffix: isLoadingUser ? __jsx(LoadingOutlined, null) : isFoundUser ? __jsx(CheckCircleFilled, null) : null\n      }))), __jsx(Form.Item, {\n        name: \"consignerName\",\n        rules: [{\n          required: !isFoundUser,\n          message: 'Vui lòng nhập tên khách hàng'\n        }],\n        label: \"T\\xEAn Kh\\xE1ch H\\xE0ng\"\n      }, __jsx(Col, {\n        sm: 24,\n        md: 24\n      }, __jsx(Input, {\n        disabled: !formData.phoneNumber || formData.phoneNumber.length < 10,\n        value: formData.consignerName,\n        id: \"consignerName\",\n        key: \"consignerName\",\n        allowClear: true,\n        onChange: this.changeData,\n        placeholder: \"...\"\n      }))), __jsx(Form.Item, {\n        name: \"consignerIdCard\",\n        rules: [{\n          required: !isFoundUser,\n          message: 'Vui lòng nhập chứng minh thư'\n        }],\n        label: \"CMND\"\n      }, __jsx(Col, {\n        sm: 24,\n        md: 12\n      }, __jsx(Input, {\n        disabled: !formData.phoneNumber || formData.phoneNumber.length < 10,\n        value: formData.consignerIdCard,\n        id: \"consignerIdCard\",\n        key: \"consignerIdCard\",\n        onChange: this.changeData,\n        allowClear: true,\n        placeholder: \"...\"\n      }))), __jsx(Form.Item, {\n        name: \"mail\",\n        rules: [{\n          required: !isFoundUser,\n          type: 'email',\n          message: 'Email không hợp lệ'\n        }],\n        label: \"Email\"\n      }, __jsx(Col, {\n        sm: 24,\n        md: 24\n      }, __jsx(Input, {\n        disabled: !formData.phoneNumber || formData.phoneNumber.length < 10,\n        value: formData.mail,\n        id: \"mail\",\n        key: \"mail\",\n        onChange: this.changeData,\n        allowClear: true,\n        placeholder: \"...\"\n      }))), __jsx(Form.Item, {\n        name: \"bankName\",\n        rules: [{\n          required: !isFoundUser,\n          message: 'Vui lòng nhập tên ngân hàng'\n        }],\n        label: \"Ng\\xE2n h\\xE0ng\"\n      }, __jsx(Col, {\n        sm: 24,\n        md: 24\n      }, __jsx(Input, {\n        disabled: !formData.phoneNumber || formData.phoneNumber.length < 10,\n        value: formData.bankName,\n        id: \"bankName\",\n        key: \"bankName\",\n        onChange: this.changeData,\n        allowClear: true,\n        placeholder: \"...\"\n      }))), __jsx(Form.Item, {\n        name: \"bankId\",\n        rules: [{\n          required: !isFoundUser,\n          message: 'Vui lòng nhập id ngân hàng'\n        }],\n        label: \"ID Ng\\xE2n h\\xE0ng\"\n      }, __jsx(Col, {\n        sm: 24,\n        md: 12\n      }, __jsx(Input, {\n        disabled: !formData.phoneNumber || formData.phoneNumber.length < 10,\n        value: formData.bankId,\n        id: \"bankId\",\n        key: \"bankId\",\n        onChange: this.changeData,\n        type: 'number',\n        allowClear: true,\n        placeholder: \"...\"\n      }))), __jsx(Form.Item, {\n        name: \"birthday\",\n        label: \"Sinh nh\\u1EADt\"\n      }, __jsx(Col, {\n        sm: 24,\n        md: 12\n      }, __jsx(DatePicker, {\n        disabled: !formData.phoneNumber || formData.phoneNumber.length < 10,\n        id: \"birthday\",\n        key: \"birthday\",\n        defaultValue: moment(),\n        value: moment(formData.birthday, dateFormat),\n        onChange: this.onChangeBirthday,\n        format: dateFormat,\n        placeholder: dateFormat,\n        style: {\n          width: '100%'\n        }\n      }))), __jsx(Divider, null), __jsx(Form.Item, {\n        name: \"consignmentId\",\n        rules: [{\n          required: true,\n          message: 'Vui lòng nhập mã ký gửi'\n        }],\n        label: \"M\\xE3 k\\xFD g\\u1EEDi\"\n      }, __jsx(Col, {\n        sm: 24,\n        md: 12\n      }, __jsx(Input, {\n        allowClear: true,\n        id: \"consignmentId\",\n        key: \"consignmentId\",\n        onChange: this.changeData,\n        placeholder: \"...\"\n      }))), __jsx(Form.Item, {\n        name: \"numberOfProducts\",\n        rules: [{\n          required: true,\n          message: 'Vui lòng nhập số lượng'\n        }],\n        label: \"S\\u1ED1 l\\u01B0\\u1EE3ng H\\xE0ng Ho\\xE1\"\n      }, __jsx(Col, {\n        sm: 24,\n        md: 12\n      }, __jsx(Input, {\n        defaultValue: 1,\n        type: 'number',\n        id: \"numberOfProducts\",\n        key: \"numberOfProducts\",\n        onChange: this.changeData,\n        allowClear: true,\n        placeholder: \"...\"\n      }))), __jsx(Form.Item, {\n        label: \"Ng\\xE0y tr\\u1EA3 ti\\u1EC1n\"\n      }, __jsx(Input.Group, {\n        compact: true\n      }, __jsx(Select, {\n        onChange: this.onChangeTimeGetMoney,\n        defaultValue: allInfoTag && allInfoTag[0] && allInfoTag[0].name,\n        size: \"large\",\n        loading: isLoadingTags,\n        id: \"timeGetMoney\",\n        key: \"timeGetMoney\",\n        placeholder: \"...\"\n      }, isLoadingTags ? null : allInfoTag.map(function (tag) {\n        return __jsx(React.Fragment, null, __jsx(Option, {\n          style: {\n            width: '100px'\n          },\n          value: tag.code\n        }, tag.code));\n      })), __jsx(Input, {\n        disabled: true,\n        style: {\n          width: '50%'\n        },\n        value: formData.timeGetMoney,\n        defaultValue: moment().format('DD-MM-YYYY')\n      }))), __jsx(Form.Item, {\n        name: \"consigneeName\",\n        label: \"T\\xEAn Nh\\xE2n Vi\\xEAn\"\n      }, __jsx(Input, {\n        defaultValue: userData.name,\n        id: \"consigneeName\",\n        key: \"consigneeName\",\n        value: userData.name,\n        disabled: true,\n        placeholder: userData.name\n      })), __jsx(Form.Item, {\n        className: \"button-confirm-box MT20 MB40\"\n      }, __jsx(Button, {\n        disabled: isLoadingTags || isLoadingUser || !formData.phoneNumber,\n        loading: isConsigning,\n        type: \"primary\",\n        htmlType: \"submit\"\n      }, \"X\\xE1c nh\\u1EADn\"))))), __jsx(MyModal, {\n        ref: this.myModal\n      }));\n    }\n  }]);\n\n  return Consignment;\n}(React.PureComponent);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    locale: state.locale,\n    userData: state.userData\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, null)(Consignment));","map":{"version":3,"sources":["/Users/macbook/Desktop/giveawaypremium-client/pages/Screen/DashBoard/components/Consignment/index.js"],"names":["React","withRouter","connect","Form","Row","Col","Input","Button","Descriptions","Divider","DatePicker","Select","images","MyModal","showNotification","LoadingOutlined","CheckCircleFilled","Router","isMobile","Lottie","GapService","moment","Option","dateFormat","Consignment","props","setState","isLoadingTags","getConsignmentID","res","results","length","allInfoTag","reverse","console","log","state","userData","isFoundUser","objectIdFoundUser","formData","timeGroupId","isConsigning","setConsignment","objectId","result","isShowConfirmForm","customerFormData","consignerName","phoneNumber","consignerIdCard","mail","email","birthday","bankName","bankId","updateCustomer","username","password","setCustomer","resCus","phoneKey","target","value","isLoadingUser","getCustomer","fullName","identityNumber","banks","type","accNumber","numberOfConsignment","numberOfConsignmentTime","consignmentId","consigneeName","name","numberOfProducts","timeGetMoney","format","formatTime","e","id","findTag","filter","tag","code","formRef","createRef","myModal","fetchAllTags","layout","labelCol","span","wrapperCol","defaultOptionsSuccess","loop","autoplay","animationData","successJson","onRefeshAll","onConsign","changedValues","allValues","required","message","fetchUserByPhoneNumber","minWidth","changeData","onChangeBirthday","width","onChangeTimeGetMoney","map","PureComponent","mapStateToProps","locale"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { withRouter } from 'next/router'\nimport { connect } from 'react-redux'\nimport { Form, Row, Col, Input, Button, Descriptions, Divider, DatePicker, Select } from 'antd'\nimport { images } from 'config/images'\nimport MyModal from 'pages/Components/MyModal'\nimport { showNotification } from 'common/function'\nimport { LoadingOutlined, CheckCircleFilled } from '@ant-design/icons'\nimport { Router } from 'common/routes'\nimport { isMobile } from 'react-device-detect'\nimport './style.scss'\nimport Lottie from 'react-lottie'\nimport GapService from 'controller/Api/Services/Gap'\nimport moment from 'moment'\n\nconst { Option } = Select\n\nconst dateFormat = 'DD-MM-YYYY'\nclass Consignment extends React.PureComponent {\n  constructor (props) {\n    super(props)\n    this.state = {\n      allInfoTag: [],\n      formData: {\n        consigneeName: this.props.userData.name || '',\n        consignerName: '',\n        phoneNumber: '',\n        consignerIdCard: '',\n        mail: '',\n        birthday: moment(),\n        bankName: '',\n        bankId: '',\n        numberOfProducts: 1,\n        consignmentId: '',\n        timeGetMoney: moment().format('DD-MM-YYYY'),\n        numberOfConsignmentTime: 0,\n        numberOfConsignment: 0\n      },\n      isLoadingTags: false,\n      objectIdFoundUser: '',\n      birthday: moment(),\n      isConsigning: false,\n      isShowConfirmForm: false,\n      isFoundUser: false,\n      isLoadingUser: false\n    }\n    this.formRef = React.createRef()\n    this.myModal = React.createRef()\n  }\n\n  componentDidMount () {\n    this.fetchAllTags()\n  }\n\n  componentDidUpdate () {\n\n  }\n\n  fetchAllTags = async () => {\n    this.setState({\n      isLoadingTags: true\n    }, async () => {\n      const res = await GapService.getConsignmentID()\n      if (res && res.results && res.results.length > 0) {\n        this.setState({\n          allInfoTag: res.results.reverse(),\n          isLoadingTags: false\n        }, console.log(this.state))\n      } else {\n        this.setState({\n          isLoadingTags: false\n        })\n      }\n    })\n  }\n\n  onConsign = () => {\n    const { userData } = this.props\n    const { isFoundUser, objectIdFoundUser, formData, timeGroupId } = this.state\n\n    console.log(userData)\n    this.setState({\n      isConsigning: true\n    }, async () => {\n      console.log('onConsign')\n      console.log(formData)\n      console.log(this.state)\n      if (isFoundUser && objectIdFoundUser) { // for already user\n        console.log('for already user')\n        const result = await GapService.setConsignment(formData, userData.objectId, objectIdFoundUser, timeGroupId)\n        console.log(result)\n        if (result && result.objectId) {\n          this.setState({\n            isShowConfirmForm: true,\n            isConsigning: false\n          }, async () => {\n            const customerFormData = {\n              consignerName: formData.consignerName,\n              phoneNumber: formData.phoneNumber,\n              consignerIdCard: formData.consignerIdCard,\n              mail: formData.mail,\n              email: formData.mail || 'nothing@giveaway.com',\n              birthday: formData.birthday,\n              bankName: formData.bankName,\n              bankId: formData.bankId\n            }\n            console.log('udpate user')\n            console.log(customerFormData)\n            console.log(objectIdFoundUser)\n\n            GapService.updateCustomer(customerFormData, objectIdFoundUser)\n          })\n        } else {\n          showNotification('Tạo Đơn Ký gửi thất bại')\n        }\n      } else { // for new user\n        console.log('for new user')\n\n        const customerFormData = {\n          consignerName: formData.consignerName,\n          phoneNumber: formData.phoneNumber,\n          consignerIdCard: formData.consignerIdCard,\n          mail: formData.mail,\n          email: formData.mail || 'nothing@giveaway.com',\n          username: formData.phoneNumber,\n          password: formData.consignerIdCard,\n          birthday: formData.birthday,\n          bankName: formData.bankName,\n          bankId: formData.bankId\n        }\n        console.log('create user')\n        console.log(customerFormData)\n        const resCus = await GapService.setCustomer(customerFormData)\n\n        console.log(resCus)\n\n        if (resCus && resCus.objectId) {\n          showNotification('Thêm khách hàng thành công')\n          const result = await GapService.setConsignment(formData, userData.objectId, resCus.objectId, timeGroupId)\n          console.log(result)\n\n          if (result && result.objectId) {\n            this.setState({\n              isShowConfirmForm: true,\n              isConsigning: false\n            })\n          }\n        } else {\n          showNotification('Tạo khách hàng thất bại')\n        }\n      }\n    })\n  }\n\n  fetchUserByPhoneNumber = async (phoneKey) => {\n    const { formData } = this.state\n\n    console.log('phoneKey.target.value')\n    console.log(phoneKey.target.value)\n\n    if (phoneKey && phoneKey.target && phoneKey.target.value && phoneKey.target.value.length >= 10) {\n      console.log('fetchUserByPhoneNumber run')\n      this.setState({\n        isLoadingUser: true\n      })\n\n      const res = await GapService.getCustomer(phoneKey.target.value)\n      console.log('fetchUserByPhoneNumber finish')\n      console.log(res)\n      if (res && res.results && res.results[0]) {\n        console.log('fetchUserByPhoneNumber set form')\n\n        this.setState({\n          formData: {\n            ...this.state.formData,\n            consignerName: res.results[0].fullName,\n            phoneNumber: res.results[0].phoneNumber,\n            consignerIdCard: res.results[0].identityNumber,\n            mail: res.results[0].mail,\n            birthday: res.results[0].birthday,\n            bankName: res.results[0].banks[0] ? res.results[0].banks[0].type : '',\n            bankId: res.results[0].banks[0] ? res.results[0].banks[0].accNumber : '',\n            numberOfConsignment: res.results[0].numberOfConsignment || 0,\n            numberOfConsignmentTime: res.results[0].numberOfConsignmentTime || 0\n          },\n          birthday: res.results[0].birthday,\n          isFoundUser: true,\n          isLoadingUser: false,\n          objectIdFoundUser: res.results[0].objectId\n        }, () => {\n          console.log(this.state)\n        })\n      } else {\n        this.setState({\n          isFoundUser: false,\n          isLoadingUser: false\n        })\n      }\n    } else if (phoneKey && phoneKey.target && phoneKey.target.value && phoneKey.target.value.length < 10) {\n      console.log('fetchUserByPhoneNumber == 0')\n      // this.onRefeshAll()\n      this.setState({\n        formData: {\n          ...this.state.formData,\n          consignerName: '',\n          phoneNumber: phoneKey.target.value,\n          consignerIdCard: '',\n          mail: '',\n          birthday: moment(),\n          bankName: '',\n          bankId: '',\n          consignmentId: ''\n        },\n        objectIdFoundUser: '',\n        birthday: moment(),\n        isShowConfirmForm: false,\n        isFoundUser: false\n      })\n      // this.setState({\n      //   allInfoTag: [],\n      //   formData: {\n      //     consigneeName: this.props.userData.name || '',\n      //     consignerName: '',\n      //     phoneNumber: phoneKey.target.value,\n      //     consignerIdCard: '',\n      //     mail: '',\n      //     birthday: moment(),\n      //     bankName: '',\n      //     bankId: '',\n      //     numberOfProducts: 1,\n      //     consignmentId: '',\n      //     timeGetMoney: moment().format('MM-YYYY'),\n      //     numberOfConsignmentTime: 0,\n      //     numberOfConsignment: 0\n      //   },\n      //   isLoadingTags: false,\n      //   objectIdFoundUser: '',\n      //   birthday: moment(),\n      //   isConsigning: false,\n      //   isShowConfirmForm: false,\n      //   isFoundUser: false,\n      //   isLoadingUser: false\n      // })\n    } else {\n      console.log('fetchUserByPhoneNumber dont run 2')\n      this.setState({\n        formData: {\n          ...this.state.formData,\n          consignerName: '',\n          phoneNumber: phoneKey.target.value,\n          consignerIdCard: '',\n          mail: '',\n          birthday: moment(),\n          bankName: '',\n          bankId: '',\n          consignmentId: ''\n        },\n        objectIdFoundUser: '',\n        birthday: moment(),\n        isShowConfirmForm: false,\n        isFoundUser: false\n      })\n      // this.onRefeshAll()\n    }\n  }\n\n  onRefeshAll = () => {\n    this.setState({\n      allInfoTag: [],\n      formData: {\n        consigneeName: this.props.userData.name || '',\n        consignerName: '',\n        phoneNumber: '',\n        consignerIdCard: '',\n        mail: '',\n        birthday: moment(),\n        bankName: '',\n        bankId: '',\n        numberOfProducts: 1,\n        consignmentId: '',\n        timeGetMoney: moment().format('MM-YYYY'),\n        numberOfConsignmentTime: 0,\n        numberOfConsignment: 0\n      },\n      isLoadingTags: false,\n      objectIdFoundUser: '',\n      birthday: moment(),\n      isConsigning: false,\n      isShowConfirmForm: false,\n      isFoundUser: false,\n      isLoadingUser: false\n    })\n  }\n\n  onChangeBirthday = (value) => {\n    try {\n      const formatTime = moment(value).format('DD-MM-YYYY')\n      console.log(formatTime)\n      console.log(value)\n\n      this.setState({\n        formData: {\n          ...this.state.formData,\n          birthday: formatTime\n        },\n        birthday: formatTime\n      }, () => {\n        console.log(this.state)\n      })\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  changeData = (value) => {\n    console.log(value.target.id)\n    const { formData } = this.state\n\n    this.setState({\n      formData: {\n        ...formData,\n        [value.target.id]: value.target.value\n      }\n    }, () => console.log(this.state))\n  }\n\n  onChangeTimeGetMoney = (value) => {\n    const { formData, allInfoTag } = this.state\n\n    console.log('onChangeTimeGetMoney')\n    console.log(value)\n    const findTag = allInfoTag.filter(tag => tag.code === value)\n\n    if (findTag && findTag[0]) {\n      this.setState({\n        formData: {\n          ...formData,\n          timeGetMoney: findTag[0].timeGetMoney\n        },\n        timeGroupId: findTag[0].code\n      }, () => {\n        console.log(this.state)\n      })\n    }\n  }\n\n  render () {\n    const { userData } = this.props\n    const {\n      formData, isConsigning, isShowConfirmForm,\n      birthday, isLoadingUser, isFoundUser, isLoadingTags, allInfoTag\n    } = this.state\n\n    const layout = {\n      labelCol: { span: 9 },\n      wrapperCol: { span: 15 }\n    }\n\n    // const defaultOptions = {\n    //   loop: false,\n    //   autoplay: true,\n    //   animationData: images.consignmentForm\n    // }\n\n    const defaultOptionsSuccess = {\n      loop: false,\n      autoplay: true,\n      animationData: images.successJson\n    }\n\n    return (\n      <div className='consignment-container'>\n        {\n          isShowConfirmForm\n            ? <>\n              <Lottie\n                options={defaultOptionsSuccess}\n                height={150}\n                width={150}\n                isStopped={false}\n                isPaused={false}\n              />\n              <Row justify='center'>\n                <Col span={20}>\n                  <Descriptions>\n                    <Descriptions.Item span={24} label='Mã Ký gửi'>{formData.consignmentId}</Descriptions.Item>\n                    <Descriptions.Item span={24} label='Số lượng Hàng Hoá'>{formData.numberOfProducts}</Descriptions.Item>\n                    <Descriptions.Item span={24} label='Ngày trả tiền'>{formData.timeGetMoney}</Descriptions.Item>\n                    <Descriptions.Item span={24} label='Tên Khách Hàng'>{formData.consignerName}</Descriptions.Item>\n                    <Descriptions.Item span={24} label='Tên Nhân Viên'>{formData.consigneeName}</Descriptions.Item>\n                    <Descriptions.Item span={24} label='Số điện thoại'>{formData.phoneNumber}</Descriptions.Item>\n                    <Descriptions.Item span={24} label='Email'>{formData.mail}</Descriptions.Item>\n                    <Descriptions.Item span={24} label='Ngân hàng'>{formData.bankName}</Descriptions.Item>\n                    <Descriptions.Item span={24} label='ID Ngân hàng'>{formData.bankId}</Descriptions.Item>\n                    <Descriptions.Item span={24} label='Chứng minh thư'>{formData.consignerIdCard}</Descriptions.Item>\n                    <Descriptions.Item span={24} label='Sinh nhật'>{moment(formData.birthday).format('DD-MM-YYYY')}</Descriptions.Item>\n                  </Descriptions>\n                </Col>\n              </Row>\n              <Button className='MT20' onClick={this.onRefeshAll} >Quay lại</Button>\n            </>\n            : <>\n              {/* <Lottie\n                options={defaultOptions}\n                height={100}\n                width={100}\n                isStopped={false}\n                isPaused={false}\n              /> */}\n              <Form\n                ref={this.formRef}\n                {...layout}\n                name='consignment'\n                initialValues={formData}\n                // onFinish={this.onFinish}\n                onFinish={this.onConsign}\n                onValuesChange={(changedValues, allValues) => {\n                  console.log(changedValues)\n                  this.setState({\n                    formData: {\n                      ...formData,\n                      ...changedValues\n                    }\n                  }, () => console.log(this.state))\n                }}\n              >\n                <Row className='flex sell-card-form PT40 PB35' justify='center'>\n                  <Form.Item name='phoneNumber' rules={[{ required: true, message: 'Vui lòng nhập số điện thoại' }]} label='Số điện thoại'>\n                    <Col sm={24} md={12}>\n                      {/* <Search placeholder=\"input search loading default\" loading /> */}\n                      <Input value={formData.phoneNumber} maxLength={12} allowClear onChange={this.fetchUserByPhoneNumber} style={{ minWidth: 100 }} placeholder='...' suffix={isLoadingUser ? <LoadingOutlined /> : isFoundUser ? <CheckCircleFilled /> : null} />\n                    </Col>\n                  </Form.Item>\n                  <Form.Item name='consignerName' rules={[{ required: !isFoundUser, message: 'Vui lòng nhập tên khách hàng' }]} label='Tên Khách Hàng'>\n                    <Col sm={24} md={24}>\n                      <Input disabled={!formData.phoneNumber || formData.phoneNumber.length < 10} value={formData.consignerName} id='consignerName' key='consignerName' allowClear onChange={this.changeData} placeholder='...' />\n                    </Col>\n                  </Form.Item>\n                  <Form.Item name='consignerIdCard' rules={[{ required: !isFoundUser, message: 'Vui lòng nhập chứng minh thư' }]} label='CMND'>\n                    <Col sm={24} md={12}>\n                      <Input disabled={!formData.phoneNumber || formData.phoneNumber.length < 10} value={formData.consignerIdCard} id='consignerIdCard' key='consignerIdCard' onChange={this.changeData} allowClear placeholder='...' />\n                    </Col>\n                  </Form.Item>\n                  <Form.Item name='mail' rules={[{ required: !isFoundUser, type: 'email', message: 'Email không hợp lệ' }]} label='Email'>\n                    <Col sm={24} md={24}>\n                      <Input disabled={!formData.phoneNumber || formData.phoneNumber.length < 10} value={formData.mail} id='mail' key='mail' onChange={this.changeData} allowClear placeholder='...' />\n                    </Col>\n                  </Form.Item>\n                  <Form.Item name='bankName' rules={[{ required: !isFoundUser, message: 'Vui lòng nhập tên ngân hàng' }]} label='Ngân hàng'>\n                    <Col sm={24} md={24}>\n                      <Input disabled={!formData.phoneNumber || formData.phoneNumber.length < 10} value={formData.bankName} id='bankName' key='bankName' onChange={this.changeData} allowClear placeholder='...' />\n                    </Col>\n                  </Form.Item>\n                  <Form.Item name='bankId' rules={[{ required: !isFoundUser, message: 'Vui lòng nhập id ngân hàng' }]} label='ID Ngân hàng'>\n                    <Col sm={24} md={12}>\n                      <Input disabled={!formData.phoneNumber || formData.phoneNumber.length < 10} value={formData.bankId} id='bankId' key='bankId' onChange={this.changeData} type={'number'} allowClear placeholder='...' />\n                    </Col>\n                  </Form.Item>\n                  <Form.Item name='birthday' label='Sinh nhật'>\n                    <Col sm={24} md={12}>\n                      <DatePicker disabled={!formData.phoneNumber || formData.phoneNumber.length < 10} id='birthday' key='birthday' defaultValue={moment()} value={moment(formData.birthday, dateFormat)} onChange={this.onChangeBirthday} format={dateFormat} placeholder={dateFormat} style={{ width: '100%' }} />\n                    </Col>\n                  </Form.Item>\n\n                  <Divider />\n\n                  <Form.Item name='consignmentId' rules={[{ required: true, message: 'Vui lòng nhập mã ký gửi' }]} label='Mã ký gửi'>\n                    <Col sm={24} md={12}>\n                      <Input allowClear id='consignmentId' key='consignmentId' onChange={this.changeData} placeholder='...' />\n                    </Col>\n                  </Form.Item>\n                  <Form.Item name='numberOfProducts' rules={[{ required: true, message: 'Vui lòng nhập số lượng' }]} label='Số lượng Hàng Hoá'>\n                    <Col sm={24} md={12}>\n                      <Input defaultValue={1} type={'number'} id='numberOfProducts' key='numberOfProducts' onChange={this.changeData} allowClear placeholder='...' />\n                    </Col>\n                  </Form.Item>\n\n                  <Form.Item label='Ngày trả tiền'>\n                    <Input.Group compact>\n                      <Select onChange={this.onChangeTimeGetMoney} defaultValue={allInfoTag && allInfoTag[0] && allInfoTag[0].name} size='large' loading={isLoadingTags} id='timeGetMoney' key='timeGetMoney' placeholder='...'>\n                        {\n                          isLoadingTags ? null\n                            : allInfoTag.map(tag => {\n                              return (\n                              <>\n                                <Option style={{ width: '100px' }} value={tag.code}>{tag.code}</Option>\n                              </>\n                              )\n                            })\n                        }\n                      </Select>\n                      <Input disabled style={{ width: '50%' }} value={formData.timeGetMoney} defaultValue={moment().format('DD-MM-YYYY')} />\n                    </Input.Group>\n                  </Form.Item>\n\n                  <Form.Item name='consigneeName' label='Tên Nhân Viên'>\n                    <Input defaultValue={userData.name} id='consigneeName' key='consigneeName' value={userData.name} disabled placeholder={userData.name} />\n                  </Form.Item>\n\n                  <Form.Item className='button-confirm-box MT20 MB40'>\n                    <Button disabled={isLoadingTags || isLoadingUser || !formData.phoneNumber} loading={isConsigning} type='primary' htmlType='submit'>Xác nhận</Button>\n                  </Form.Item>\n                </Row>\n              </Form>\n            </>\n        }\n        <MyModal ref={this.myModal} />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  locale: state.locale,\n  userData: state.userData\n})\n\nexport default withRouter(connect(mapStateToProps, null)(Consignment))\n"]},"metadata":{},"sourceType":"module"}