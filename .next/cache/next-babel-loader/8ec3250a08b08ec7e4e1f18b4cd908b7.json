{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { Router } from \"../../../common/routes\";\nimport ReduxServices from \"../../../common/redux\";\nimport { connect } from 'react-redux';\nimport { Form, Button, Layout, Input, Checkbox, Menu, Row, Col } from 'antd';\nimport { withRouter } from 'next/router';\nimport { images } from \"../../../config/images\";\nimport { isMobile } from 'react-device-detect';\nimport MyModal from \"../../Components/MyModal\";\nimport \"./style.scss\";\nimport { checkIsSigned, showNotification } from \"../../../common/function\";\nimport GapService from \"../../../controller/Api/Services/Gap\";\nimport Media from 'react-media';\nimport { bindActionCreators } from 'redux';\nimport StorageActions from \"../../../controller/Redux/actions/storageActions\";\nimport { AppstoreOutlined, MenuUnfoldOutlined, MenuFoldOutlined, PieChartOutlined, DesktopOutlined, ContainerOutlined, MailOutlined, WalletOutlined, SettingOutlined } from '@ant-design/icons';\nimport Consignment from \"./components/Consignment\";\nimport ManageScreen from \"./components/ManageScreen\";\nimport SettingScreen from \"./components/SettingScreen\";\n\nclass DashBoard extends React.PureComponent {\n  static async getInitialProps({\n    query\n  }) {\n    return {\n      query\n    };\n  }\n\n  constructor(props) {\n    var _this;\n\n    super(props);\n    _this = this;\n\n    _defineProperty(this, \"checkIsSigned\", function () {\n      const {\n        userData\n      } = _this.props;\n      const isSigned = checkIsSigned(userData);\n\n      if (!isSigned) {\n        _this.myModal.current.openModal(_this.renderLoginPopup(), {\n          closable: false\n        });\n      } else {\n        console.log('isSigned = true');\n      }\n    });\n\n    _defineProperty(this, \"onFinish\", async function (values) {\n      _this.setState({\n        isLoadingLogin: true\n      }, async function () {\n        const username = values.username;\n        const password = values.password;\n        const result = await GapService.logInAdmin(username, password);\n\n        if (result && result.sessionToken) {\n          console.log(result);\n          ReduxServices.setUserToken(result);\n          showNotification('Đăng nhập thành công');\n\n          _this.setState({\n            isLogin: true,\n            isLoadingLogin: false\n          });\n\n          _this.closeModal();\n        } else {\n          showNotification('Đăng nhập thất bại');\n\n          _this.setState({\n            isLoadingLogin: false\n          });\n        }\n      });\n    });\n\n    _defineProperty(this, \"handleSignOut\", function () {\n      ReduxServices.deleteUserToken();\n    });\n\n    _defineProperty(this, \"onFinishFailed\", function (errorInfo) {\n      showNotification('Đăng nhập thất bại');\n      console.log('Failed:', errorInfo);\n    });\n\n    _defineProperty(this, \"renderLoginPopup\", function () {\n      const {\n        isLoadingLogin\n      } = _this.state;\n      const layout = {\n        labelCol: {\n          span: 8\n        },\n        wrapperCol: {\n          span: 16\n        }\n      };\n      const tailLayout = {\n        wrapperCol: {\n          offset: 8,\n          span: 16\n        }\n      };\n      return __jsx(\"div\", {\n        className: \"login-popup-container\"\n      }, __jsx(\"span\", {\n        className: \"text text-title MB15\"\n      }, \"\\u0110\\u0103ng nh\\u1EADp\"), __jsx(Form, _extends({}, layout, {\n        name: \"basic\",\n        initialValues: {\n          remember: true\n        },\n        onFinish: _this.onFinish,\n        onFinishFailed: _this.onFinishFailed\n      }), __jsx(Form.Item, {\n        label: \"T\\xE0i kho\\u1EA3n\",\n        name: \"username\",\n        rules: [{\n          required: true,\n          message: 'Vui lòng nhập tên tài khoản!'\n        }]\n      }, __jsx(Input, null)), __jsx(Form.Item, {\n        label: \"M\\u1EADt kh\\u1EA9u\",\n        name: \"password\",\n        rules: [{\n          required: true,\n          message: 'Vui lòng nhập mật khẩu!'\n        }]\n      }, __jsx(Input.Password, null)), __jsx(Form.Item, tailLayout, __jsx(Button, {\n        loading: isLoadingLogin,\n        type: \"primary\",\n        htmlType: \"submit\"\n      }, \"OK\"))));\n    });\n\n    _defineProperty(this, \"closeModal\", function () {\n      _this.myModal.current.closeModal();\n    });\n\n    _defineProperty(this, \"detectRenderConent\", function () {\n      const {\n        numberPage\n      } = _this.state;\n\n      switch (numberPage) {\n        case 1:\n          return _this.renderSummarize();\n\n        case 2:\n          return _this.renderSummarize();\n\n        case 3:\n          return _this.renderManageScreen();\n\n        case 4:\n          return _this.renderConsignment();\n\n        case 5:\n          return _this.renderSetting();\n      }\n    });\n\n    _defineProperty(this, \"handleChoosePage\", function (page) {\n      if (page && page.key) {\n        _this.setState({\n          numberPage: Number(page.key)\n        });\n      }\n    });\n\n    _defineProperty(this, \"renderSummarize\", function () {\n      return __jsx(\"div\", null);\n    });\n\n    _defineProperty(this, \"renderConsignment\", function () {\n      return __jsx(Consignment, null);\n    });\n\n    _defineProperty(this, \"renderManageScreen\", function () {\n      return __jsx(ManageScreen, null);\n    });\n\n    _defineProperty(this, \"renderSetting\", function () {\n      return __jsx(SettingScreen, null);\n    });\n\n    this.state = {\n      isLogin: false,\n      isLoadingLogin: false,\n      numberPage: 1,\n      formData: {\n        nameConsigner: '',\n        nameConsignee: '',\n        numConsignment: 1,\n        bankNumber: '',\n        bankName: ''\n      }\n    };\n    this.myModal = /*#__PURE__*/React.createRef();\n  }\n\n  async componentDidMount() {\n    this.checkIsSigned();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    this.checkIsSigned();\n  }\n\n  render() {\n    var _this2 = this;\n\n    const {\n      numberPage\n    } = this.state;\n    return __jsx(\"div\", {\n      className: \"dashboard-container\"\n    }, __jsx(\"div\", {\n      className: \"dashboard-container-wrapper\"\n    }, __jsx(\"div\", {\n      className: \"sider-container\"\n    }, __jsx(Media, {\n      query: \"(max-width: 567px)\",\n      render: function () {\n        return __jsx(Menu, {\n          defaultSelectedKeys: ['1'],\n          theme: \"dark\",\n          inlineCollapsed: _this2.state.collapsed,\n          selectedKeys: numberPage.toString()\n        }, __jsx(Menu.Item, {\n          key: \"1\",\n          onClick: _this2.handleChoosePage\n        }, __jsx(PieChartOutlined, {\n          width: 40,\n          height: 40\n        })), __jsx(Menu.Item, {\n          key: \"2\",\n          onClick: _this2.handleChoosePage\n        }, __jsx(DesktopOutlined, null)), __jsx(Menu.Item, {\n          key: \"3\",\n          onClick: _this2.handleChoosePage\n        }, __jsx(ContainerOutlined, null)), __jsx(Menu.Item, {\n          key: \"4\",\n          onClick: _this2.handleChoosePage\n        }, __jsx(MailOutlined, null)), __jsx(Menu.Item, {\n          key: \"5\",\n          onClick: _this2.handleChoosePage\n        }, __jsx(SettingOutlined, null)), __jsx(Menu.Item, {\n          key: \"6\",\n          onClick: _this2.handleSignOut\n        }, __jsx(WalletOutlined, null)));\n      }\n    }), __jsx(Media, {\n      query: \"(min-width: 568px)\",\n      render: function () {\n        return __jsx(Menu, {\n          defaultSelectedKeys: ['1'],\n          mode: \"inline\",\n          theme: \"dark\",\n          inlineCollapsed: _this2.state.collapsed,\n          selectedKeys: numberPage.toString()\n        }, __jsx(Menu.Item, {\n          key: \"1\",\n          onClick: _this2.handleChoosePage\n        }, __jsx(PieChartOutlined, null), \"Th\\u1ED1ng K\\xEA\"), __jsx(Menu.Item, {\n          key: \"2\",\n          onClick: _this2.handleChoosePage\n        }, __jsx(DesktopOutlined, null), \"Ghi Ch\\xFA\"), __jsx(Menu.Item, {\n          key: \"3\",\n          onClick: _this2.handleChoosePage\n        }, __jsx(ContainerOutlined, null), \"Qu\\u1EA3n l\\xFD\"), __jsx(Menu.Item, {\n          key: \"4\",\n          onClick: _this2.handleChoosePage\n        }, __jsx(MailOutlined, null), \"K\\xFD g\\u1EEDi\"), __jsx(Menu.Item, {\n          key: \"5\",\n          onClick: _this2.handleChoosePage\n        }, __jsx(SettingOutlined, null), \"C\\xE0i \\u0111\\u1EB7t\"), __jsx(Menu.Item, {\n          key: \"6\",\n          onClick: _this2.handleSignOut\n        }, __jsx(WalletOutlined, null), \"\\u0110\\u0103ng xu\\u1EA5t\"));\n      }\n    })), __jsx(\"div\", {\n      className: \"dashboard-content\"\n    }, this.detectRenderConent())), __jsx(MyModal, {\n      ref: this.myModal\n    }));\n  }\n\n}\n\nconst mapStateToProps = function (state) {\n  return {\n    locale: state.locale,\n    userData: state.userData\n  };\n};\n\nexport default withRouter(connect(mapStateToProps)(DashBoard));","map":{"version":3,"sources":["/Users/macbook/Desktop/giveawaypremium-client/pages/Screen/DashBoard/index.js"],"names":["React","Router","ReduxServices","connect","Form","Button","Layout","Input","Checkbox","Menu","Row","Col","withRouter","images","isMobile","MyModal","checkIsSigned","showNotification","GapService","Media","bindActionCreators","StorageActions","AppstoreOutlined","MenuUnfoldOutlined","MenuFoldOutlined","PieChartOutlined","DesktopOutlined","ContainerOutlined","MailOutlined","WalletOutlined","SettingOutlined","Consignment","ManageScreen","SettingScreen","DashBoard","PureComponent","getInitialProps","query","constructor","props","userData","isSigned","myModal","current","openModal","renderLoginPopup","closable","console","log","values","setState","isLoadingLogin","username","password","result","logInAdmin","sessionToken","setUserToken","isLogin","closeModal","deleteUserToken","errorInfo","state","layout","labelCol","span","wrapperCol","tailLayout","offset","remember","onFinish","onFinishFailed","required","message","numberPage","renderSummarize","renderManageScreen","renderConsignment","renderSetting","page","key","Number","formData","nameConsigner","nameConsignee","numConsignment","bankNumber","bankName","createRef","componentDidMount","componentDidUpdate","prevProps","prevState","render","collapsed","toString","handleChoosePage","handleSignOut","detectRenderConent","mapStateToProps","locale"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Router } from 'common/routes'\nimport ReduxServices from 'common/redux'\nimport { connect } from 'react-redux'\nimport { Form, Button, Layout, Input, Checkbox, Menu, Row, Col } from 'antd'\nimport { withRouter } from 'next/router'\nimport { images } from 'config/images'\nimport { isMobile } from 'react-device-detect'\nimport MyModal from 'pages/Components/MyModal'\nimport './style.scss'\nimport { checkIsSigned, showNotification } from 'common/function'\nimport GapService from 'controller/Api/Services/Gap'\nimport Media from 'react-media'\nimport { bindActionCreators } from 'redux'\nimport StorageActions from 'controller/Redux/actions/storageActions'\nimport {\n  AppstoreOutlined,\n  MenuUnfoldOutlined,\n  MenuFoldOutlined,\n  PieChartOutlined,\n  DesktopOutlined,\n  ContainerOutlined,\n  MailOutlined,\n  WalletOutlined,\n  SettingOutlined\n} from '@ant-design/icons'\n\nimport Consignment from './components/Consignment'\nimport ManageScreen from './components/ManageScreen'\nimport SettingScreen from './components/SettingScreen'\n\nclass DashBoard extends React.PureComponent {\n  static async getInitialProps ({ query }) {\n    return { query }\n  }\n  constructor (props) {\n    super(props)\n    this.state = {\n      isLogin: false,\n      isLoadingLogin: false,\n      numberPage: 1,\n      formData: {\n        nameConsigner: '',\n        nameConsignee: '',\n        numConsignment: 1,\n        bankNumber: '',\n        bankName: ''\n      }\n    }\n    this.myModal = React.createRef()\n  }\n\n  async componentDidMount () {\n    this.checkIsSigned()\n  }\n\n  componentDidUpdate (prevProps, prevState) {\n    this.checkIsSigned()\n  }\n\n  checkIsSigned = () => {\n    const { userData } = this.props\n    const isSigned = checkIsSigned(userData)\n    if (!isSigned) {\n      this.myModal.current.openModal(this.renderLoginPopup(), { closable: false })\n    } else {\n      console.log('isSigned = true')\n    }\n  }\n\n  onFinish = async (values) => {\n    this.setState({\n      isLoadingLogin: true\n    }, async () => {\n      const username = values.username\n      const password = values.password\n\n      const result = await GapService.logInAdmin(username, password)\n      if (result && result.sessionToken) {\n        console.log(result)\n        ReduxServices.setUserToken(result)\n        showNotification('Đăng nhập thành công')\n        this.setState({\n          isLogin: true,\n          isLoadingLogin: false\n        })\n        this.closeModal()\n      } else {\n        showNotification('Đăng nhập thất bại')\n        this.setState({\n          isLoadingLogin: false\n        })\n      }\n    })\n  };\n\n  handleSignOut = () => {\n    ReduxServices.deleteUserToken()\n  }\n\n  onFinishFailed = (errorInfo) => {\n    showNotification('Đăng nhập thất bại')\n    console.log('Failed:', errorInfo)\n  };\n\n  renderLoginPopup = () => {\n    const { isLoadingLogin } = this.state\n    const layout = {\n      labelCol: { span: 8 },\n      wrapperCol: { span: 16 }\n    }\n    const tailLayout = {\n      wrapperCol: { offset: 8, span: 16 }\n    }\n    return (\n      <div className='login-popup-container'>\n        <span className='text text-title MB15'>Đăng nhập</span>\n        <Form\n          {...layout}\n          name='basic'\n          initialValues={{ remember: true }}\n          onFinish={this.onFinish}\n          onFinishFailed={this.onFinishFailed}\n        >\n          <Form.Item\n            label='Tài khoản'\n            name='username'\n            rules={[{ required: true, message: 'Vui lòng nhập tên tài khoản!' }]}\n          >\n            <Input />\n          </Form.Item>\n\n          <Form.Item\n            label='Mật khẩu'\n            name='password'\n            rules={[{ required: true, message: 'Vui lòng nhập mật khẩu!' }]}\n          >\n            <Input.Password />\n          </Form.Item>\n\n          {/* <Form.Item {...tailLayout} name='remember' valuePropName='checked'>\n            <Checkbox className='text'>Ghi nhớ</Checkbox>\n          </Form.Item> */}\n\n          <Form.Item {...tailLayout}>\n            <Button loading={isLoadingLogin} type='primary' htmlType='submit'>\n              OK\n            </Button>\n          </Form.Item>\n        </Form>\n      </div>\n    )\n  }\n\n  closeModal = () => {\n    this.myModal.current.closeModal()\n  }\n\n  detectRenderConent = () => {\n    const { numberPage } = this.state\n    switch (numberPage) {\n    case 1:\n      return this.renderSummarize()\n    case 2:\n      return this.renderSummarize()\n    case 3:\n      return this.renderManageScreen()\n    case 4:\n      return this.renderConsignment()\n    case 5:\n      return this.renderSetting()\n    }\n  }\n\n  handleChoosePage = (page) => {\n    if (page && page.key) {\n      this.setState({\n        numberPage: Number(page.key)\n      })\n    }\n  }\n\n  renderSummarize = () => {\n    return (\n      <div />\n    )\n  }\n\n  renderConsignment = () => {\n    return (\n      <Consignment />\n    )\n  }\n\n  renderManageScreen = () => {\n    return (\n      <ManageScreen />\n    )\n  }\n\n  renderSetting = () => {\n    return (\n      <SettingScreen />\n    )\n  }\n\n  render () {\n    const { numberPage } = this.state\n    return (\n      <div className='dashboard-container'>\n        <div className='dashboard-container-wrapper'>\n          <div className='sider-container'>\n            <Media query='(max-width: 567px)' render={() => (\n              <Menu\n                defaultSelectedKeys={['1']}\n                theme='dark'\n                inlineCollapsed={this.state.collapsed}\n                selectedKeys={numberPage.toString()}\n              >\n                <Menu.Item key='1' onClick={this.handleChoosePage} ><PieChartOutlined width={40} height={40} /></Menu.Item>\n                <Menu.Item key='2' onClick={this.handleChoosePage} ><DesktopOutlined /></Menu.Item>\n                <Menu.Item key='3' onClick={this.handleChoosePage} ><ContainerOutlined /></Menu.Item>\n                <Menu.Item key='4' onClick={this.handleChoosePage} ><MailOutlined /></Menu.Item>\n                <Menu.Item key='5' onClick={this.handleChoosePage} ><SettingOutlined /></Menu.Item>\n                <Menu.Item key='6' onClick={this.handleSignOut} ><WalletOutlined /></Menu.Item>\n              </Menu>\n            )} />\n            <Media query='(min-width: 568px)' render={() =>\n              <Menu\n                defaultSelectedKeys={['1']}\n                mode='inline'\n                theme='dark'\n                inlineCollapsed={this.state.collapsed}\n                selectedKeys={numberPage.toString()}\n              >\n                <Menu.Item key='1' onClick={this.handleChoosePage} ><PieChartOutlined />Thống Kê</Menu.Item>\n                <Menu.Item key='2' onClick={this.handleChoosePage} ><DesktopOutlined />Ghi Chú</Menu.Item>\n                <Menu.Item key='3' onClick={this.handleChoosePage} ><ContainerOutlined />Quản lý</Menu.Item>\n                <Menu.Item key='4' onClick={this.handleChoosePage} ><MailOutlined />Ký gửi</Menu.Item>\n                <Menu.Item key='5' onClick={this.handleChoosePage} ><SettingOutlined />Cài đặt</Menu.Item>\n                <Menu.Item key='6' onClick={this.handleSignOut} ><WalletOutlined />Đăng xuất</Menu.Item>\n              </Menu>\n            } />\n          </div>\n          <div className='dashboard-content'>\n            {this.detectRenderConent()}\n          </div>\n        </div>\n        <MyModal ref={this.myModal} />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  locale: state.locale,\n  userData: state.userData\n})\n\nexport default withRouter(connect(mapStateToProps)(DashBoard))\n"]},"metadata":{},"sourceType":"module"}