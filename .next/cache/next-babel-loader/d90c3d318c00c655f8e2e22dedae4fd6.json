{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nvar __jsx = React.createElement;\n\n/* eslint-disable react/display-name */\nimport React, { useContext, useState, useEffect, useRef } from 'react';\nimport { withRouter } from 'next/router';\nimport { connect } from 'react-redux';\nimport { Form, Row, Col, Layout, Input, Button, Spin, Descriptions, Tabs, Table, Radio, Popconfirm } from 'antd';\nimport { images } from \"../../../../../../../config/images\";\nimport MyModal from \"../../../../../../Components/MyModal\";\nimport { showNotification, numberWithCommas } from \"../../../../../../../common/function\";\nimport { LoadingOutlined, SearchOutlined } from '@ant-design/icons';\nimport { Router } from \"../../../../../../../common/routes\";\nimport { isMobile } from 'react-device-detect';\nimport \"./style.scss\";\nimport Lottie from 'react-lottie';\nimport GapService from \"../../../../../../../controller/Api/Services/Gap\";\nimport { isEqual } from 'lodash';\nimport Highlighter from 'react-highlight-words';\n\nconst EditableRow = function (_ref) {\n  let {\n    index\n  } = _ref,\n      props = _objectWithoutProperties(_ref, [\"index\"]);\n\n  const [form] = Form.useForm();\n  return __jsx(Form, {\n    form: form,\n    component: false\n  }, __jsx(EditableContext.Provider, {\n    value: form\n  }, __jsx(\"tr\", props)));\n};\n\nconst EditableContext = /*#__PURE__*/React.createContext(null);\n\nconst EditableCell = function (_ref2) {\n  let {\n    title,\n    editable,\n    children,\n    dataIndex,\n    record,\n    handleSave\n  } = _ref2,\n      restProps = _objectWithoutProperties(_ref2, [\"title\", \"editable\", \"children\", \"dataIndex\", \"record\", \"handleSave\"]);\n\n  const {\n    0: editing,\n    1: setEditing\n  } = useState(false);\n  const inputRef = useRef(null);\n  const form = useContext(EditableContext);\n  useEffect(function () {\n    if (editing) {\n      inputRef.current.focus();\n    }\n  }, [editing]);\n\n  const toggleEdit = function () {\n    setEditing(!editing);\n    form.setFieldsValue({\n      [dataIndex]: record[dataIndex]\n    });\n  };\n\n  const save = async function () {\n    try {\n      const values = await form.validateFields();\n      toggleEdit();\n      handleSave(_objectSpread({}, record, values));\n    } catch (errInfo) {\n      console.log('Save failed:', errInfo);\n    }\n  };\n\n  let childNode = children;\n\n  if (editable) {\n    childNode = editing ? __jsx(Form.Item, {\n      style: {\n        margin: 0\n      },\n      name: dataIndex,\n      rules: [{\n        required: true,\n        message: `${title} is required.`\n      }]\n    }, __jsx(Input, {\n      ref: inputRef,\n      onPressEnter: save,\n      onBlur: save\n    })) : __jsx(\"div\", {\n      className: \"editable-cell-value-wrap\",\n      style: {\n        paddingRight: 24\n      },\n      onClick: toggleEdit\n    }, children);\n  }\n\n  return __jsx(\"td\", restProps, childNode);\n};\n\nclass TableConsignemntScreen extends React.PureComponent {\n  constructor(props) {\n    var _this;\n\n    super(props);\n    _this = this;\n\n    _defineProperty(this, \"getColumnSearchProps\", function (dataIndex) {\n      return {\n        filterDropdown: function ({\n          setSelectedKeys,\n          selectedKeys,\n          confirm,\n          clearFilters\n        }) {\n          return __jsx(\"div\", {\n            style: {\n              padding: 8\n            }\n          }, __jsx(Input, {\n            ref: function (node) {\n              _this.searchInput = node;\n            },\n            placeholder: `Tìm số điện thoại`,\n            value: selectedKeys[0],\n            onChange: function (e) {\n              return setSelectedKeys(e.target.value ? [e.target.value] : []);\n            },\n            onPressEnter: function () {\n              return _this.handleSearch(selectedKeys, confirm, dataIndex);\n            },\n            style: {\n              width: 188,\n              marginBottom: 8,\n              display: 'block'\n            }\n          }), __jsx(Button, {\n            type: \"primary\",\n            onClick: function () {\n              return _this.handleSearch(selectedKeys, confirm, dataIndex);\n            },\n            icon: __jsx(SearchOutlined, null),\n            size: \"small\",\n            style: {\n              width: '100%'\n            }\n          }, \"T\\xECm ki\\u1EBFm\"));\n        },\n        filterIcon: function (filtered) {\n          return __jsx(SearchOutlined, {\n            style: {\n              color: filtered ? '#1890ff' : undefined\n            }\n          });\n        },\n        // onFilter: (value, record) =>\n        //   record[dataIndex]\n        //     ? record[dataIndex].toString().toLowerCase().includes(value.toLowerCase())\n        //     : '',\n        onFilterDropdownVisibleChange: function (visible) {\n          if (visible) {\n            setTimeout(function () {\n              return _this.searchInput.select();\n            }, 100);\n          }\n        },\n        render: function (text) {\n          return _this.state.searchedColumn === dataIndex ? __jsx(Highlighter, {\n            highlightStyle: {\n              backgroundColor: '#ffc069',\n              padding: 0\n            },\n            searchWords: [_this.state.searchText],\n            autoEscape: true,\n            textToHighlight: text ? text.toString() : ''\n          }) : text;\n        }\n      };\n    });\n\n    _defineProperty(this, \"onChangeRadioIsGetMoney\", async function (row) {\n      console.log('onChangeRadioIsGetMoney');\n      console.log(row);\n      const newData = [..._this.state.consignmentData];\n      const index = newData.findIndex(function (item) {\n        return row.objectId === item.objectId;\n      });\n      const item = newData[index];\n\n      const newItem = _objectSpread({}, item, row, {\n        isGetMoney: !item.isGetMoney\n      });\n\n      if (!isEqual(newItem, item)) {\n        newData.splice(index, 1, newItem);\n        console.log('row');\n\n        _this.setState({\n          consignmentData: newData\n        }, async function () {\n          console.log(newItem);\n          const res = await GapService.updateConsignment(newItem);\n          console.log(res);\n\n          if (res) {\n            showNotification(`Cập nhật thành công ${item.phoneNumber}`);\n          } else {\n            showNotification(`Cập nhật chưa được`);\n          }\n        });\n      }\n    });\n\n    _defineProperty(this, \"handleSearch\", function (selectedKeys, confirm, dataIndex) {\n      console.log('handleSearch');\n      console.log(selectedKeys); // confirm()\n      // this.fetchTableData(1, selectedKeys[0])\n\n      _this.setState({\n        searchText: selectedKeys[0],\n        searchedColumn: dataIndex\n      }, function () {\n        confirm();\n      });\n    });\n\n    _defineProperty(this, \"handleReset\", function (clearFilters) {\n      clearFilters();\n\n      _this.setState({\n        searchText: ''\n      });\n    });\n\n    _defineProperty(this, \"fetchTableData\", async function (page = 1, keyword) {\n      const {\n        searchText\n      } = _this.state;\n\n      _this.setState({\n        isLoadingData: true\n      }, async function () {\n        let res;\n\n        if (!searchText) {\n          res = await GapService.getConsignment(page);\n        } else {\n          res = await GapService.getConsignment(page, searchText);\n        }\n\n        console.log('res');\n        console.log(res);\n        let consignmentData = [];\n\n        if (res && res.results) {\n          res.results.map(function (item, indexItem) {\n            consignmentData.push({\n              key: indexItem,\n              objectId: item.objectId,\n              consignerName: item.consignerName,\n              consignmentId: item.consignmentId,\n              consignerIdCard: item.consignerIdCard,\n              consigneeName: item.consigneeName,\n              phoneNumber: item.phoneNumber,\n              numberOfProducts: `${Number(item.numberOfProducts)}`,\n              numSoldConsignment: `${Number(item.numSoldConsignment || 0)}`,\n              remainNumConsignment: `${Number(item.numberOfProducts) - Number(item.numSoldConsignment || 0)}`,\n              bankName: res.results[0].banks[0] ? res.results[0].banks[0].type : '',\n              bankId: res.results[0].banks[0] ? res.results[0].banks[0].accNumber : '',\n              moneyBack: item.moneyBack,\n              email: item.email,\n              birthday: item.birthday,\n              isGetMoney: item.isGetMoney\n            });\n          });\n\n          _this.setState({\n            total: res.count,\n            consignmentData: consignmentData,\n            isLoadingData: false\n          });\n        } else {\n          _this.setState({\n            isLoadingData: false\n          });\n        }\n      });\n    });\n\n    _defineProperty(this, \"handleSave\", function (row) {\n      const newData = [..._this.state.consignmentData];\n      const index = newData.findIndex(function (item) {\n        return row.key === item.key;\n      });\n      const item = newData[index];\n      const newRemainNumConsignment = `${Number(row.numberOfProducts) - Number(row.numSoldConsignment || 0)}`;\n\n      const newItem = _objectSpread({}, item, row, {\n        remainNumConsignment: newRemainNumConsignment\n      });\n\n      if (!isEqual(newItem, item)) {\n        newData.splice(index, 1, newItem);\n        console.log('row');\n\n        _this.setState({\n          consignmentData: newData\n        }, async function () {\n          console.log(newItem);\n          const res = await GapService.updateConsignment(newItem);\n          console.log(res);\n\n          if (res) {\n            showNotification(`Cập nhật thành công ${item.phoneNumber}`);\n          } else {\n            showNotification(`Cập nhật chưa được`);\n          }\n        });\n      }\n    });\n\n    _defineProperty(this, \"paginationChange\", function (page) {\n      console.log(page);\n\n      _this.fetchTableData(page);\n    });\n\n    this.columns = [{\n      title: 'Tên khách hàng',\n      width: 15,\n      dataIndex: 'consignerName',\n      key: 'name'\n    }, _objectSpread({\n      title: 'Số điện thoại',\n      dataIndex: 'phoneNumber',\n      key: '1',\n      width: 10\n    }, this.getColumnSearchProps('phoneNumber')), {\n      title: 'Mã ký gửi',\n      dataIndex: 'consignmentId',\n      key: '2',\n      width: 10,\n      editable: true\n    }, {\n      title: 'SL ký gửi',\n      dataIndex: 'numberOfProducts',\n      key: '3',\n      width: 5,\n      editable: true\n    }, {\n      title: 'Đã bán',\n      dataIndex: 'numSoldConsignment',\n      key: '4',\n      width: 5,\n      editable: true\n    }, {\n      title: 'Còn lại',\n      dataIndex: 'remainNumConsignment',\n      key: '5',\n      width: 5\n    }, {\n      title: 'Số tiền trả khách',\n      dataIndex: 'moneyBack',\n      key: '6',\n      width: 10,\n      editable: true,\n      render: function (value) {\n        return __jsx(\"span\", null, value ? numberWithCommas(value) : '0', \" \\u0111\");\n      }\n    }, {\n      title: 'Tên ngân hàng',\n      dataIndex: 'bankName',\n      key: '7',\n      width: 10\n    }, {\n      title: 'ID ngân hàng',\n      dataIndex: 'bankId',\n      key: '8',\n      width: 10\n    }, // {\n    //   title: 'Thời gian trả tiền',\n    //   dataIndex: 'timeGetMoney',\n    //   key: '7',\n    //   width: 10,\n    //   editable: true\n    // },\n    {\n      title: 'Nhận tiền',\n      key: '9',\n      fixed: 'right',\n      width: 5,\n      render: function (value) {\n        return _this.state.consignmentData.length >= 1 ? __jsx(Popconfirm, {\n          title: \"X\\xE1c nh\\u1EADn\",\n          onConfirm: function () {\n            return _this.onChangeRadioIsGetMoney(value);\n          }\n        }, __jsx(Radio.Button, {\n          className: value.isGetMoney ? 'radio-true-isGetMoney' : 'radio-false-isGetMoney',\n          value: value.isGetMoney\n        }, value.isGetMoney ? 'Rồi' : 'Chưa')) : null;\n      }\n    }];\n    this.state = {\n      consignmentData: [],\n      total: 0,\n      page: 1,\n      searchText: '',\n      searchedColumn: ''\n    };\n    this.myModal = /*#__PURE__*/React.createRef();\n  }\n\n  componentDidMount() {\n    this.fetchTableData();\n  }\n\n  componentDidUpdate() {}\n\n  render() {\n    var _this2 = this;\n\n    const {\n      userData\n    } = this.props;\n    const {\n      isLoadingData,\n      consignmentData,\n      total\n    } = this.state;\n    const components = {\n      body: {\n        row: EditableRow,\n        cell: EditableCell\n      }\n    };\n    const columns = this.columns.map(function (col) {\n      if (!col.editable) {\n        return col;\n      }\n\n      return _objectSpread({}, col, {\n        onCell: function (record) {\n          return {\n            record,\n            editable: col.editable,\n            dataIndex: col.dataIndex,\n            title: col.title,\n            handleSave: _this2.handleSave\n          };\n        }\n      });\n    });\n    return __jsx(\"div\", {\n      className: \"tableConsignemntScreen-container\"\n    }, __jsx(Table, {\n      components: components,\n      size: \"small\",\n      loading: isLoadingData,\n      columns: columns,\n      dataSource: consignmentData,\n      bordered: true,\n      pagination: {\n        total: total,\n        pageSize: 20,\n        onChange: this.paginationChange\n      },\n      scroll: {\n        x: 1500,\n        y: '65vh'\n      }\n    }), __jsx(MyModal, {\n      ref: this.myModal\n    }));\n  }\n\n}\n\nconst mapStateToProps = function (state) {\n  return {\n    locale: state.locale,\n    userData: state.userData\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, null)(TableConsignemntScreen));","map":{"version":3,"sources":["/Users/macbook/Desktop/giveawaypremium-client/pages/Screen/DashBoard/components/ManageScreen/comppnents/TableConsignemntScreen/index.js"],"names":["React","useContext","useState","useEffect","useRef","withRouter","connect","Form","Row","Col","Layout","Input","Button","Spin","Descriptions","Tabs","Table","Radio","Popconfirm","images","MyModal","showNotification","numberWithCommas","LoadingOutlined","SearchOutlined","Router","isMobile","Lottie","GapService","isEqual","Highlighter","EditableRow","index","props","form","useForm","EditableContext","createContext","EditableCell","title","editable","children","dataIndex","record","handleSave","restProps","editing","setEditing","inputRef","current","focus","toggleEdit","setFieldsValue","save","values","validateFields","errInfo","console","log","childNode","margin","required","message","paddingRight","TableConsignemntScreen","PureComponent","constructor","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","padding","node","searchInput","e","target","value","handleSearch","width","marginBottom","display","filterIcon","filtered","color","undefined","onFilterDropdownVisibleChange","visible","setTimeout","select","render","text","state","searchedColumn","backgroundColor","searchText","toString","row","newData","consignmentData","findIndex","item","objectId","newItem","isGetMoney","splice","setState","res","updateConsignment","phoneNumber","page","keyword","isLoadingData","getConsignment","results","map","indexItem","push","key","consignerName","consignmentId","consignerIdCard","consigneeName","numberOfProducts","Number","numSoldConsignment","remainNumConsignment","bankName","banks","type","bankId","accNumber","moneyBack","email","birthday","total","count","newRemainNumConsignment","fetchTableData","columns","getColumnSearchProps","fixed","length","onChangeRadioIsGetMoney","myModal","createRef","componentDidMount","componentDidUpdate","userData","components","body","cell","col","onCell","pageSize","onChange","paginationChange","x","y","mapStateToProps","locale"],"mappings":"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","sourcesContent":["/* eslint-disable react/display-name */\nimport React, { useContext, useState, useEffect, useRef } from 'react'\nimport { withRouter } from 'next/router'\nimport { connect } from 'react-redux'\nimport { Form, Row, Col, Layout, Input, Button, Spin, Descriptions, Tabs, Table, Radio, Popconfirm } from 'antd'\nimport { images } from 'config/images'\nimport MyModal from 'pages/Components/MyModal'\nimport { showNotification, numberWithCommas } from 'common/function'\nimport { LoadingOutlined, SearchOutlined } from '@ant-design/icons'\nimport { Router } from 'common/routes'\nimport { isMobile } from 'react-device-detect'\nimport './style.scss'\nimport Lottie from 'react-lottie'\nimport GapService from 'controller/Api/Services/Gap'\nimport { isEqual } from 'lodash'\nimport Highlighter from 'react-highlight-words'\n\nconst EditableRow = ({ index, ...props }) => {\n  const [form] = Form.useForm()\n  return (\n    <Form form={form} component={false}>\n      <EditableContext.Provider value={form}>\n        <tr {...props} />\n      </EditableContext.Provider>\n    </Form>\n  )\n}\n\nconst EditableContext = React.createContext(null)\n\nconst EditableCell = ({\n  title,\n  editable,\n  children,\n  dataIndex,\n  record,\n  handleSave,\n  ...restProps\n}) => {\n  const [editing, setEditing] = useState(false)\n  const inputRef = useRef(null)\n  const form = useContext(EditableContext)\n  useEffect(() => {\n    if (editing) {\n      inputRef.current.focus()\n    }\n  }, [editing])\n\n  const toggleEdit = () => {\n    setEditing(!editing)\n    form.setFieldsValue({\n      [dataIndex]: record[dataIndex]\n    })\n  }\n\n  const save = async () => {\n    try {\n      const values = await form.validateFields()\n      toggleEdit()\n      handleSave({ ...record, ...values })\n    } catch (errInfo) {\n      console.log('Save failed:', errInfo)\n    }\n  }\n\n  let childNode = children\n\n  if (editable) {\n    childNode = editing ? (\n      <Form.Item\n        style={{\n          margin: 0\n        }}\n        name={dataIndex}\n        rules={[\n          {\n            required: true,\n            message: `${title} is required.`\n          }\n        ]}\n      >\n        <Input ref={inputRef} onPressEnter={save} onBlur={save} />\n      </Form.Item>\n    ) : (\n      <div\n        className='editable-cell-value-wrap'\n        style={{\n          paddingRight: 24\n        }}\n        onClick={toggleEdit}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  return <td {...restProps}>{childNode}</td>\n}\n\nclass TableConsignemntScreen extends React.PureComponent {\n  constructor (props) {\n    super(props)\n    this.columns = [\n      {\n        title: 'Tên khách hàng',\n        width: 15,\n        dataIndex: 'consignerName',\n        key: 'name'\n      },\n      {\n        title: 'Số điện thoại',\n        dataIndex: 'phoneNumber',\n        key: '1',\n        width: 10,\n        ...this.getColumnSearchProps('phoneNumber')\n      },\n      {\n        title: 'Mã ký gửi',\n        dataIndex: 'consignmentId',\n        key: '2',\n        width: 10,\n        editable: true\n      },\n      {\n        title: 'SL ký gửi',\n        dataIndex: 'numberOfProducts',\n        key: '3',\n        width: 5,\n        editable: true\n      },\n      {\n        title: 'Đã bán',\n        dataIndex: 'numSoldConsignment',\n        key: '4',\n        width: 5,\n        editable: true\n      },\n      {\n        title: 'Còn lại',\n        dataIndex: 'remainNumConsignment',\n        key: '5',\n        width: 5\n      },\n      {\n        title: 'Số tiền trả khách',\n        dataIndex: 'moneyBack',\n        key: '6',\n        width: 10,\n        editable: true,\n        render: (value) => <span>{value ? numberWithCommas(value) : '0'} đ</span>\n      },\n      {\n        title: 'Tên ngân hàng',\n        dataIndex: 'bankName',\n        key: '7',\n        width: 10\n      },\n      {\n        title: 'ID ngân hàng',\n        dataIndex: 'bankId',\n        key: '8',\n        width: 10\n      },\n      // {\n      //   title: 'Thời gian trả tiền',\n      //   dataIndex: 'timeGetMoney',\n      //   key: '7',\n      //   width: 10,\n      //   editable: true\n      // },\n      {\n        title: 'Nhận tiền',\n        key: '9',\n        fixed: 'right',\n        width: 5,\n        render: (value) =>\n          this.state.consignmentData.length >= 1 ? (\n            <Popconfirm title='Xác nhận' onConfirm={() => this.onChangeRadioIsGetMoney(value)}>\n              <Radio.Button className={value.isGetMoney ? 'radio-true-isGetMoney' : 'radio-false-isGetMoney'} value={value.isGetMoney}>{value.isGetMoney ? 'Rồi' : 'Chưa'}</Radio.Button>\n            </Popconfirm>\n          ) : null\n      }\n    ]\n    this.state = {\n      consignmentData: [],\n      total: 0,\n      page: 1,\n      searchText: '',\n      searchedColumn: ''\n    }\n    this.myModal = React.createRef()\n  }\n\n  componentDidMount () {\n    this.fetchTableData()\n  }\n\n  componentDidUpdate () {\n\n  }\n\n  getColumnSearchProps = dataIndex => ({\n    filterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n      <div style={{ padding: 8 }}>\n        <Input\n          ref={node => {\n            this.searchInput = node\n          }}\n          placeholder={`Tìm số điện thoại`}\n          value={selectedKeys[0]}\n          onChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\n          onPressEnter={() => this.handleSearch(selectedKeys, confirm, dataIndex)}\n          style={{ width: 188, marginBottom: 8, display: 'block' }}\n        />\n        {/* <Space> */}\n        <Button\n          type='primary'\n          onClick={() => this.handleSearch(selectedKeys, confirm, dataIndex)}\n          icon={<SearchOutlined />}\n          size='small'\n          style={{ width: '100%' }}\n        >\n            Tìm kiếm\n        </Button>\n        {/* <Button\n          type='link'\n          size='small'\n          onClick={() => {\n            confirm({ closeDropdown: false })\n            this.setState({\n              searchText: selectedKeys[0],\n              searchedColumn: dataIndex\n            })\n          }}\n        >\n            Filter\n        </Button> */}\n        {/* </Space> */}\n      </div>\n    ),\n    filterIcon: filtered => <SearchOutlined style={{ color: filtered ? '#1890ff' : undefined }} />,\n    // onFilter: (value, record) =>\n    //   record[dataIndex]\n    //     ? record[dataIndex].toString().toLowerCase().includes(value.toLowerCase())\n    //     : '',\n    onFilterDropdownVisibleChange: visible => {\n      if (visible) {\n        setTimeout(() => this.searchInput.select(), 100)\n      }\n    },\n    render: text =>\n      this.state.searchedColumn === dataIndex ? (\n        <Highlighter\n          highlightStyle={{ backgroundColor: '#ffc069', padding: 0 }}\n          searchWords={[this.state.searchText]}\n          autoEscape\n          textToHighlight={text ? text.toString() : ''}\n        />\n      ) : (\n        text\n      )\n  });\n\n  onChangeRadioIsGetMoney = async (row) => {\n    console.log('onChangeRadioIsGetMoney')\n    console.log(row)\n\n    const newData = [...this.state.consignmentData]\n    const index = newData.findIndex((item) => row.objectId === item.objectId)\n    const item = newData[index]\n    const newItem = { ...item, ...row, isGetMoney: !item.isGetMoney }\n\n    if (!isEqual(newItem, item)) {\n      newData.splice(index, 1, newItem)\n      console.log('row')\n      this.setState({\n        consignmentData: newData\n      }, async () => {\n        console.log(newItem)\n        const res = await GapService.updateConsignment(newItem)\n        console.log(res)\n        if (res) {\n          showNotification(`Cập nhật thành công ${item.phoneNumber}`)\n        } else {\n          showNotification(`Cập nhật chưa được`)\n        }\n      })\n    }\n  }\n\n  handleSearch = (selectedKeys, confirm, dataIndex) => {\n    console.log('handleSearch')\n    console.log(selectedKeys)\n\n    // confirm()\n    // this.fetchTableData(1, selectedKeys[0])\n    this.setState({\n      searchText: selectedKeys[0],\n      searchedColumn: dataIndex\n    }, () => {\n      confirm()\n    })\n  };\n\n  handleReset = clearFilters => {\n    clearFilters()\n    this.setState({ searchText: '' })\n  };\n\n  fetchTableData = async (page = 1, keyword) => {\n    const { searchText } = this.state\n    this.setState({\n      isLoadingData: true\n    }, async () => {\n      let res\n\n      if (!searchText) {\n        res = await GapService.getConsignment(page)\n      } else {\n        res = await GapService.getConsignment(page, searchText)\n      }\n\n      console.log('res')\n      console.log(res)\n      let consignmentData = []\n      if (res && res.results) {\n        res.results.map((item, indexItem) => {\n          consignmentData.push({\n            key: indexItem,\n            objectId: item.objectId,\n            consignerName: item.consignerName,\n            consignmentId: item.consignmentId,\n            consignerIdCard: item.consignerIdCard,\n            consigneeName: item.consigneeName,\n            phoneNumber: item.phoneNumber,\n            numberOfProducts: `${Number(item.numberOfProducts)}`,\n            numSoldConsignment: `${Number(item.numSoldConsignment || 0)}`,\n            remainNumConsignment: `${Number(item.numberOfProducts) - Number(item.numSoldConsignment || 0)}`,\n            bankName: res.results[0].banks[0] ? res.results[0].banks[0].type : '',\n            bankId: res.results[0].banks[0] ? res.results[0].banks[0].accNumber : '',\n            moneyBack: item.moneyBack,\n            email: item.email,\n            birthday: item.birthday,\n            isGetMoney: item.isGetMoney\n          })\n        })\n        this.setState({\n          total: res.count,\n          consignmentData: consignmentData,\n          isLoadingData: false\n        })\n      } else {\n        this.setState({\n          isLoadingData: false\n        })\n      }\n    })\n  }\n\n  handleSave = (row) => {\n    const newData = [...this.state.consignmentData]\n    const index = newData.findIndex((item) => row.key === item.key)\n    const item = newData[index]\n    const newRemainNumConsignment = `${Number(row.numberOfProducts) - Number(row.numSoldConsignment || 0)}`\n    const newItem = { ...item, ...row, remainNumConsignment: newRemainNumConsignment }\n\n    if (!isEqual(newItem, item)) {\n      newData.splice(index, 1, newItem)\n      console.log('row')\n      this.setState({\n        consignmentData: newData\n      }, async () => {\n        console.log(newItem)\n        const res = await GapService.updateConsignment(newItem)\n        console.log(res)\n        if (res) {\n          showNotification(`Cập nhật thành công ${item.phoneNumber}`)\n        } else {\n          showNotification(`Cập nhật chưa được`)\n        }\n      })\n    }\n  };\n\n  paginationChange = (page) => {\n    console.log(page)\n    this.fetchTableData(page)\n  }\n\n  render () {\n    const { userData } = this.props\n    const { isLoadingData, consignmentData, total } = this.state\n\n    const components = {\n      body: {\n        row: EditableRow,\n        cell: EditableCell\n      }\n    }\n\n    const columns = this.columns.map((col) => {\n      if (!col.editable) {\n        return col\n      }\n\n      return {\n        ...col,\n        onCell: (record) => ({\n          record,\n          editable: col.editable,\n          dataIndex: col.dataIndex,\n          title: col.title,\n          handleSave: this.handleSave\n        })\n      }\n    })\n\n    return (\n      <div className='tableConsignemntScreen-container'>\n        <Table\n          components={components}\n          size='small'\n          loading={isLoadingData}\n          columns={columns}\n          dataSource={consignmentData}\n          bordered\n          pagination={{\n            total: total,\n            pageSize: 20,\n            onChange: this.paginationChange\n          }}\n          scroll={{ x: 1500, y: '65vh' }}\n        />\n        <MyModal ref={this.myModal} />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  locale: state.locale,\n  userData: state.userData\n})\n\nexport default withRouter(connect(mapStateToProps, null)(TableConsignemntScreen))\n"]},"metadata":{},"sourceType":"module"}