{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { Router } from \"../../../../../common/routes\";\nimport ReduxServices from \"../../../../../common/redux\";\nimport { connect } from 'react-redux';\nimport { withRouter } from 'next/router';\nimport { images } from \"../../../../../config/images\";\nimport { isMobile } from 'react-device-detect';\nimport MyModal from \"../../../../Components/MyModal\";\nimport { Form, Row, Col, Layout, Input, Button, Spin, Descriptions, Tabs, Table, Radio, Popconfirm } from 'antd';\nimport GapService from \"../../../../../controller/Api/Services/Gap\";\nimport \"./style.scss\";\nimport { numberWithCommas } from \"../../../../../common/function\";\nimport { isEmpty } from 'lodash';\n\nclass SearchForm extends React.PureComponent {\n  static async getInitialProps({\n    query\n  }) {\n    return {\n      query\n    };\n  }\n\n  constructor(props) {\n    var _this;\n\n    super(props);\n    _this = this;\n\n    _defineProperty(this, \"fetchTableData\", async function (page = 1, keyword) {\n      const {\n        formData\n      } = _this.state;\n\n      _this.setState({\n        isLoadingData: true\n      }, async function () {\n        let res;\n        res = await GapService.getConsignment(page, formData.phoneNumber);\n        console.log('res');\n        console.log(res);\n        let consignmentData = [];\n\n        if (res && res.results) {\n          res.results.map(function (item, indexItem) {\n            consignmentData.push({\n              key: item.objectId,\n              objectId: item.objectId,\n              consignerName: item.consignerName,\n              consignmentId: item.consignmentId,\n              consignerIdCard: item.consignerIdCard,\n              consigneeName: item.consigneeName,\n              timeGetMoney: item.timeGetMoney,\n              phoneNumber: item.phoneNumber,\n              numberOfProducts: `${Number(item.numberOfProducts)}`,\n              numSoldConsignment: `${Number(item.numSoldConsignment || 0)}`,\n              remainNumConsignment: `${Number(item.numberOfProducts) - Number(item.numSoldConsignment || 0)}`,\n              bankName: item.bankName,\n              bankId: item.bankId,\n              moneyBack: item.moneyBack,\n              email: item.email,\n              isGetMoney: item.isGetMoney\n            });\n          });\n\n          _this.setState({\n            total: res.count,\n            consignmentData: consignmentData,\n            isLoadingData: false\n          });\n        } else {\n          _this.setState({\n            isLoadingData: false\n          });\n        }\n      });\n    });\n\n    _defineProperty(this, \"onConsign\", async function () {\n      const {\n        page,\n        formData\n      } = _this.state;\n\n      _this.setState({\n        isSearching: true\n      }, async function () {\n        const res = await GapService.getConsignment(page, formData.phoneNumber, 20);\n        console.log('res: ', res);\n\n        if (res && res.results) {\n          _this.setState({\n            total: res.results.length,\n            consignmentData: res.results,\n            isHideUserForm: true,\n            isSearching: false\n          }, function () {\n            setTimeout(function () {\n              _this.setState({\n                step: 1\n              });\n            }, 1000);\n          });\n        } else {\n          _this.setState({\n            isSearching: false\n          });\n        }\n      });\n    });\n\n    _defineProperty(this, \"paginationChange\", function (page) {\n      console.log(page);\n\n      _this.fetchTableData(page);\n    });\n\n    _defineProperty(this, \"backPropStepOne\", function () {\n      _this.setState({\n        isHideUserForm: false\n      }, function () {\n        setTimeout(function () {\n          _this.setState({\n            step: 0\n          });\n        }, 1000);\n      });\n    });\n\n    _defineProperty(this, \"backProp\", function () {\n      _this.setState({\n        step: 0,\n        formData: {\n          phoneNumber: ''\n        },\n        consignmentData: [],\n        total: 0,\n        page: 1,\n        isSearching: false,\n        isHideUserForm: false,\n        isLoadingData: false\n      });\n\n      _this.props.backConsignment();\n    });\n\n    this.columns = [{\n      title: 'Tên khách hàng',\n      width: 12,\n      dataIndex: 'consignerName',\n      key: 'consignerName'\n    }, {\n      title: 'Mã ký gửi',\n      dataIndex: 'consignmentId',\n      key: 'consignmentId',\n      width: 10\n    }, {\n      title: 'SL ký gửi',\n      dataIndex: 'numberOfProducts',\n      key: '3',\n      width: 5\n    }, {\n      title: 'Đã bán',\n      dataIndex: 'numSoldConsignment',\n      key: '4',\n      width: 5\n    }, {\n      title: 'Còn lại',\n      dataIndex: 'remainNumConsignment',\n      key: '5',\n      width: 5\n    }, {\n      title: 'Số tiền trả khách',\n      dataIndex: 'moneyBack',\n      key: '6',\n      width: 10,\n      render: function (value) {\n        return __jsx(\"span\", null, value ? numberWithCommas(value) : '0', \" \\u0111\");\n      }\n    }, {\n      title: 'Thời gian trả tiền',\n      dataIndex: 'timeGetMoney',\n      key: '7',\n      width: 10\n    }, {\n      title: 'Chuyển tiền',\n      key: '8',\n      fixed: 'right',\n      width: 6,\n      render: function (value) {\n        return _this.state.consignmentData.length >= 1 ? __jsx(Radio.Button, {\n          className: value.isGetMoney ? 'radio-true-isGetMoney' : 'radio-false-isGetMoney',\n          value: value.isGetMoney\n        }, value.isGetMoney ? 'Rồi' : 'Chưa') : null;\n      }\n    }];\n    this.state = {\n      step: 0,\n      formData: {\n        phoneNumber: ''\n      },\n      consignmentData: [],\n      total: 0,\n      page: 1,\n      isSearching: false,\n      isHideUserForm: false,\n      isLoadingData: false\n    };\n    this.myModal = /*#__PURE__*/React.createRef();\n  }\n\n  componentDidMount() {}\n\n  componentDidUpdate() {}\n\n  componentWillUnmount() {}\n\n  // closeModal = () => {\n  //   this.myModal.current.closeModal()\n  // }\n  render() {\n    var _this2 = this;\n\n    const {\n      isHideUserForm,\n      formData,\n      step,\n      isSearching,\n      consignmentData,\n      isLoadingData,\n      total\n    } = this.state;\n    const layout = {\n      labelCol: {\n        span: 9\n      },\n      wrapperCol: {\n        span: 15\n      }\n    };\n    return __jsx(\"div\", {\n      className: \"searchform-home-container\"\n    }, __jsx(\"div\", {\n      className: \"searching-form\"\n    }, __jsx(Form, _extends({\n      className: 'searching-box' + (!isHideUserForm && step === 0 ? ' show' : ''),\n      ref: this.formRef\n    }, layout, {\n      name: \"consignment\",\n      initialValues: formData // onFinish={this.onFinish}\n      ,\n      onFinish: this.onConsign,\n      onValuesChange: function (changedValues, allValues) {\n        _this2.setState({\n          formData: _objectSpread({}, formData, changedValues)\n        }, function () {\n          return console.log(_this2.state);\n        });\n      }\n    }), __jsx(Row, {\n      className: \"flex sell-card-form\",\n      justify: \"center\"\n    }, __jsx(\"h1\", {\n      className: 'text text-searching-title'\n    }, \"T\\xECm th\\xF4ng tin k\\xFD g\\u1EEDi qua s\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"), __jsx(Form.Item, {\n      name: \"phoneNumber\",\n      rules: [{\n        required: true,\n        message: 'Vui lòng nhập số điện thoại'\n      }],\n      label: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"\n    }, __jsx(Col, {\n      sm: 24,\n      md: 22\n    }, __jsx(Input, {\n      size: \"small\",\n      type: 'number',\n      id: \"phoneNumber\",\n      key: \"phoneNumber\",\n      onChange: this.changeData,\n      allowClear: true,\n      placeholder: \"...\"\n    }))), __jsx(\"div\", {\n      className: \"flex justify-around align-center\",\n      style: {\n        width: '100%'\n      }\n    }, __jsx(Button, {\n      onClick: this.backProp,\n      type: \"secondary\"\n    }, \"Quay l\\u1EA1i\"), __jsx(Button, {\n      loading: isSearching,\n      type: \"secondary\",\n      htmlType: \"submit\"\n    }, \"T\\xECm ki\\u1EBFm\")))), __jsx(\"div\", {\n      className: 'searching-table' + (isHideUserForm && step === 1 ? ' show' : '')\n    }, __jsx(Table, {\n      size: \"small\",\n      loading: isLoadingData,\n      columns: this.columns,\n      dataSource: consignmentData,\n      bordered: true,\n      pagination: {\n        total: total,\n        pageSize: 20,\n        onChange: this.paginationChange\n      },\n      scroll: {\n        x: 1500,\n        y: '65vh'\n      }\n    }), __jsx(\"div\", {\n      className: \"flex justify-around align-center\",\n      style: {\n        width: '100%'\n      }\n    }, __jsx(Button, {\n      onClick: this.backPropStepOne,\n      type: \"secondary\"\n    }, \"Quay l\\u1EA1i\")))), __jsx(MyModal, {\n      ref: this.myModal\n    }));\n  }\n\n}\n\nconst mapStateToProps = function (state) {\n  return {\n    locale: state.locale,\n    userData: state.userData\n  };\n};\n\nexport default withRouter(connect(mapStateToProps)(SearchForm));","map":{"version":3,"sources":["/Users/macbook/Desktop/giveawaypremium-client/pages/Screen/Consignment/components/SearchForm/index.js"],"names":["React","Router","ReduxServices","connect","withRouter","images","isMobile","MyModal","Form","Row","Col","Layout","Input","Button","Spin","Descriptions","Tabs","Table","Radio","Popconfirm","GapService","numberWithCommas","isEmpty","SearchForm","PureComponent","getInitialProps","query","constructor","props","page","keyword","formData","state","setState","isLoadingData","res","getConsignment","phoneNumber","console","log","consignmentData","results","map","item","indexItem","push","key","objectId","consignerName","consignmentId","consignerIdCard","consigneeName","timeGetMoney","numberOfProducts","Number","numSoldConsignment","remainNumConsignment","bankName","bankId","moneyBack","email","isGetMoney","total","count","isSearching","length","isHideUserForm","setTimeout","step","fetchTableData","backConsignment","columns","title","width","dataIndex","render","value","fixed","myModal","createRef","componentDidMount","componentDidUpdate","componentWillUnmount","layout","labelCol","span","wrapperCol","formRef","onConsign","changedValues","allValues","required","message","changeData","backProp","pageSize","onChange","paginationChange","x","y","backPropStepOne","mapStateToProps","locale","userData"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Router } from 'common/routes'\nimport ReduxServices from 'common/redux'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'next/router'\nimport { images } from 'config/images'\nimport { isMobile } from 'react-device-detect'\nimport MyModal from 'pages/Components/MyModal'\nimport { Form, Row, Col, Layout, Input, Button, Spin, Descriptions, Tabs, Table, Radio, Popconfirm } from 'antd'\nimport GapService from 'controller/Api/Services/Gap'\n\nimport './style.scss'\nimport { numberWithCommas } from 'common/function'\nimport { isEmpty } from 'lodash'\n\nclass SearchForm extends React.PureComponent {\n  static async getInitialProps ({ query }) {\n    return { query }\n  }\n  constructor (props) {\n    super(props)\n    this.columns = [\n      {\n        title: 'Tên khách hàng',\n        width: 12,\n        dataIndex: 'consignerName',\n        key: 'consignerName'\n      },\n      {\n        title: 'Mã ký gửi',\n        dataIndex: 'consignmentId',\n        key: 'consignmentId',\n        width: 10\n      },\n      {\n        title: 'SL ký gửi',\n        dataIndex: 'numberOfProducts',\n        key: '3',\n        width: 5\n      },\n      {\n        title: 'Đã bán',\n        dataIndex: 'numSoldConsignment',\n        key: '4',\n        width: 5\n      },\n      {\n        title: 'Còn lại',\n        dataIndex: 'remainNumConsignment',\n        key: '5',\n        width: 5\n      },\n      {\n        title: 'Số tiền trả khách',\n        dataIndex: 'moneyBack',\n        key: '6',\n        width: 10,\n        render: (value) => <span>{value ? numberWithCommas(value) : '0'} đ</span>\n      },\n      {\n        title: 'Thời gian trả tiền',\n        dataIndex: 'timeGetMoney',\n        key: '7',\n        width: 10\n      },\n      {\n        title: 'Chuyển tiền',\n        key: '8',\n        fixed: 'right',\n        width: 6,\n        render: (value) =>\n          this.state.consignmentData.length >= 1 ? (\n            <Radio.Button className={value.isGetMoney ? 'radio-true-isGetMoney' : 'radio-false-isGetMoney'} value={value.isGetMoney}>{value.isGetMoney ? 'Rồi' : 'Chưa'}</Radio.Button>\n          ) : null\n      }\n    ]\n    this.state = {\n      step: 0,\n      formData: {\n        phoneNumber: ''\n      },\n      consignmentData: [],\n      total: 0,\n      page: 1,\n      isSearching: false,\n      isHideUserForm: false,\n      isLoadingData: false\n    }\n\n    this.myModal = React.createRef()\n  }\n\n  componentDidMount () {\n  }\n  componentDidUpdate () {\n  }\n\n  componentWillUnmount () {\n  }\n\n  fetchTableData = async (page = 1, keyword) => {\n    const { formData } = this.state\n    this.setState({\n      isLoadingData: true\n    }, async () => {\n      let res\n\n      res = await GapService.getConsignment(page, formData.phoneNumber)\n\n      console.log('res')\n      console.log(res)\n      let consignmentData = []\n      if (res && res.results) {\n        res.results.map((item, indexItem) => {\n          consignmentData.push({\n            key: item.objectId,\n            objectId: item.objectId,\n            consignerName: item.consignerName,\n            consignmentId: item.consignmentId,\n            consignerIdCard: item.consignerIdCard,\n            consigneeName: item.consigneeName,\n            timeGetMoney: item.timeGetMoney,\n            phoneNumber: item.phoneNumber,\n            numberOfProducts: `${Number(item.numberOfProducts)}`,\n            numSoldConsignment: `${Number(item.numSoldConsignment || 0)}`,\n            remainNumConsignment: `${Number(item.numberOfProducts) - Number(item.numSoldConsignment || 0)}`,\n            bankName: item.bankName,\n            bankId: item.bankId,\n            moneyBack: item.moneyBack,\n            email: item.email,\n            isGetMoney: item.isGetMoney\n          })\n        })\n        this.setState({\n          total: res.count,\n          consignmentData: consignmentData,\n          isLoadingData: false\n        })\n      } else {\n        this.setState({\n          isLoadingData: false\n        })\n      }\n    })\n  }\n\n  onConsign = async () => {\n    const { page, formData } = this.state\n    this.setState({\n      isSearching: true\n    }, async () => {\n      const res = await GapService.getConsignment(page, formData.phoneNumber, 20)\n      console.log('res: ', res)\n\n      if (res && res.results) {\n        this.setState({\n          total: res.results.length,\n          consignmentData: res.results,\n          isHideUserForm: true,\n          isSearching: false\n        }, () => {\n          setTimeout(() => {\n            this.setState({\n              step: 1\n            })\n          }, 1000)\n        })\n      } else {\n        this.setState({\n          isSearching: false\n        })\n      }\n    })\n  }\n\n  paginationChange = (page) => {\n    console.log(page)\n    this.fetchTableData(page)\n  }\n\n  backPropStepOne = () => {\n    this.setState({\n      isHideUserForm: false\n    }, () => {\n      setTimeout(() => {\n        this.setState({\n          step: 0\n        })\n      }, 1000)\n    })\n  }\n\n  backProp = () => {\n    this.setState({\n      step: 0,\n      formData: {\n        phoneNumber: ''\n      },\n      consignmentData: [],\n      total: 0,\n      page: 1,\n      isSearching: false,\n      isHideUserForm: false,\n      isLoadingData: false\n    })\n    this.props.backConsignment()\n  }\n\n  // closeModal = () => {\n  //   this.myModal.current.closeModal()\n  // }\n\n  render () {\n    const { isHideUserForm, formData, step, isSearching, consignmentData, isLoadingData, total } = this.state\n    const layout = {\n      labelCol: { span: 9 },\n      wrapperCol: { span: 15 }\n    }\n\n    return (\n      <div className='searchform-home-container'>\n        <div className='searching-form'>\n\n          <Form\n            className={'searching-box' + (!isHideUserForm && step === 0 ? ' show' : '')}\n            ref={this.formRef}\n            {...layout}\n            name='consignment'\n            initialValues={formData}\n            // onFinish={this.onFinish}\n            onFinish={this.onConsign}\n            onValuesChange={(changedValues, allValues) => {\n              this.setState({\n                formData: {\n                  ...formData,\n                  ...changedValues\n                }\n              }, () => console.log(this.state))\n            }}\n          >\n            <Row className='flex sell-card-form' justify='center'>\n              <h1 className={'text text-searching-title'}>Tìm thông tin ký gửi qua số điện thoại</h1>\n\n              <Form.Item name='phoneNumber' rules={[{ required: true, message: 'Vui lòng nhập số điện thoại' }]} label='Số điện thoại'>\n                <Col sm={24} md={22}>\n                  <Input size='small' type={'number'} id='phoneNumber' key='phoneNumber' onChange={this.changeData} allowClear placeholder='...' />\n                </Col>\n              </Form.Item>\n\n              <div className='flex justify-around align-center' style={{ width: '100%' }}>\n                <Button onClick={this.backProp} type='secondary'>Quay lại</Button>\n                <Button loading={isSearching} type='secondary' htmlType='submit'>Tìm kiếm</Button>\n              </div>\n            </Row>\n          </Form>\n\n          <div className={'searching-table' + (isHideUserForm && step === 1 ? ' show' : '')}>\n            <Table\n              size='small'\n              loading={isLoadingData}\n              columns={this.columns}\n              dataSource={consignmentData}\n              bordered\n              pagination={{\n                total: total,\n                pageSize: 20,\n                onChange: this.paginationChange\n              }}\n              scroll={{ x: 1500, y: '65vh' }}\n            />\n\n            <div className='flex justify-around align-center' style={{ width: '100%' }}>\n              <Button onClick={this.backPropStepOne} type='secondary'>Quay lại</Button>\n            </div>\n          </div>\n        </div>\n        <MyModal ref={this.myModal} />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  locale: state.locale,\n  userData: state.userData\n})\n\nexport default withRouter(connect(mapStateToProps)(SearchForm))\n"]},"metadata":{},"sourceType":"module"}