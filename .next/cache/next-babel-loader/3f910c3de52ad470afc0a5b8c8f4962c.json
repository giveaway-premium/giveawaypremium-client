{"ast":null,"code":"import _Reflect$construct from \"@babel/runtime-corejs2/core-js/reflect/construct\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = _Reflect$construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !_Reflect$construct) return false; if (_Reflect$construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(_Reflect$construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Router } from \"../../../../../common/routes\";\nimport ReduxServices from \"../../../../../common/redux\";\nimport { connect } from 'react-redux';\nimport { withRouter } from 'next/router';\nimport { images } from \"../../../../../config/images\";\nimport { isMobile } from 'react-device-detect';\nimport MyModal from \"../../../../Components/MyModal\";\nimport { Form, Row, Col, Layout, Input, Button, Spin, Descriptions, Tabs, Table, Radio, Popconfirm } from 'antd';\nimport GapService from \"../../../../../controller/Api/Services/Gap\";\nimport \"./style.scss\";\nimport { numberWithCommas } from \"../../../../../common/function\";\nimport { isEmpty } from 'lodash';\n\nvar SearchForm = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(SearchForm, _React$PureComponent);\n\n  var _super = _createSuper(SearchForm);\n\n  function SearchForm(props) {\n    var _this;\n\n    _classCallCheck(this, SearchForm);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchTableData\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var page,\n          keyword,\n          formData,\n          _args2 = arguments;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              page = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : 1;\n              keyword = _args2.length > 1 ? _args2[1] : undefined;\n              formData = _this.state.formData;\n\n              _this.setState({\n                isLoadingData: true\n              }, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                var res, consignmentData;\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return GapService.getConsignment(page, formData.phoneNumber);\n\n                      case 2:\n                        res = _context.sent;\n                        console.log('res');\n                        console.log(res);\n                        consignmentData = [];\n\n                        if (res && res.results) {\n                          res.results.map(function (item, indexItem) {\n                            consignmentData.push({\n                              key: item.objectId,\n                              objectId: item.objectId,\n                              consignerName: item.consignerName,\n                              consignmentId: item.consignmentId,\n                              consignerIdCard: item.consignerIdCard,\n                              consigneeName: item.consigneeName,\n                              timeGetMoney: item.timeGetMoney,\n                              phoneNumber: item.phoneNumber,\n                              numberOfProducts: \"\".concat(Number(item.numberOfProducts)),\n                              numSoldConsignment: \"\".concat(Number(item.numSoldConsignment || 0)),\n                              remainNumConsignment: \"\".concat(Number(item.numberOfProducts) - Number(item.numSoldConsignment || 0)),\n                              bankName: item.bankName,\n                              bankId: item.bankId,\n                              moneyBack: item.moneyBack,\n                              email: item.email,\n                              isGetMoney: item.isGetMoney\n                            });\n                          });\n\n                          _this.setState({\n                            total: res.count,\n                            consignmentData: consignmentData,\n                            isLoadingData: false\n                          });\n                        } else {\n                          _this.setState({\n                            isLoadingData: false\n                          });\n                        }\n\n                      case 7:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              })));\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"onConsign\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var _this$state, page, formData;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _this$state = _this.state, page = _this$state.page, formData = _this$state.formData;\n\n              _this.setState({\n                isSearching: true\n              }, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n                var res;\n                return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                  while (1) {\n                    switch (_context3.prev = _context3.next) {\n                      case 0:\n                        _context3.next = 2;\n                        return GapService.getConsignment(page, formData.phoneNumber, 20);\n\n                      case 2:\n                        res = _context3.sent;\n                        console.log('res: ', res);\n\n                        if (res && res.results) {\n                          _this.setState({\n                            total: res.results.length,\n                            consignmentData: res.results,\n                            isHideUserForm: true,\n                            isSearching: false\n                          }, function () {\n                            setTimeout(function () {\n                              _this.setState({\n                                step: 1\n                              });\n                            }, 1000);\n                          });\n                        } else {\n                          _this.setState({\n                            isSearching: false\n                          });\n                        }\n\n                      case 5:\n                      case \"end\":\n                        return _context3.stop();\n                    }\n                  }\n                }, _callee3);\n              })));\n\n            case 2:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"paginationChange\", function (page) {\n      console.log(page);\n\n      _this.fetchTableData(page);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"backPropStepOne\", function () {\n      _this.setState({\n        isHideUserForm: false\n      }, function () {\n        setTimeout(function () {\n          _this.setState({\n            step: 0\n          });\n        }, 1000);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"backProp\", function () {\n      _this.setState({\n        step: 0,\n        formData: {\n          phoneNumber: ''\n        },\n        consignmentData: [],\n        total: 0,\n        page: 1,\n        isSearching: false,\n        isHideUserForm: false,\n        isLoadingData: false\n      });\n\n      _this.props.backConsignment();\n    });\n\n    _this.columns = [{\n      title: 'Tên khách hàng',\n      width: 12,\n      dataIndex: 'consignerName',\n      key: 'consignerName'\n    }, {\n      title: 'Mã ký gửi',\n      dataIndex: 'consignmentId',\n      key: 'consignmentId',\n      width: 10\n    }, {\n      title: 'SL ký gửi',\n      dataIndex: 'numberOfProducts',\n      key: '3',\n      width: 5\n    }, {\n      title: 'Đã bán',\n      dataIndex: 'numSoldConsignment',\n      key: '4',\n      width: 5\n    }, {\n      title: 'Còn lại',\n      dataIndex: 'remainNumConsignment',\n      key: '5',\n      width: 5\n    }, {\n      title: 'Số tiền trả khách',\n      dataIndex: 'moneyBack',\n      key: '6',\n      width: 10,\n      render: function render(value) {\n        return __jsx(\"span\", null, value ? numberWithCommas(value) : '0', \" \\u0111\");\n      }\n    }, {\n      title: 'Thời gian trả tiền',\n      dataIndex: 'timeGetMoney',\n      key: '7',\n      width: 10\n    }, {\n      title: 'Chuyển tiền',\n      key: '8',\n      fixed: 'right',\n      width: 6,\n      render: function render(value) {\n        return _this.state.consignmentData.length >= 1 ? __jsx(Radio.Button, {\n          className: value.isGetMoney ? 'radio-true-isGetMoney' : 'radio-false-isGetMoney',\n          value: value.isGetMoney\n        }, value.isGetMoney ? 'Rồi' : 'Chưa') : null;\n      }\n    }];\n    _this.state = {\n      step: 0,\n      formData: {\n        phoneNumber: ''\n      },\n      consignmentData: [],\n      total: 0,\n      page: 1,\n      isSearching: false,\n      isHideUserForm: false,\n      isLoadingData: false\n    };\n    _this.myModal = /*#__PURE__*/React.createRef();\n    return _this;\n  }\n\n  _createClass(SearchForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {}\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {}\n  }, {\n    key: \"render\",\n    value: // closeModal = () => {\n    //   this.myModal.current.closeModal()\n    // }\n    function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          isHideUserForm = _this$state2.isHideUserForm,\n          formData = _this$state2.formData,\n          step = _this$state2.step,\n          isSearching = _this$state2.isSearching,\n          consignmentData = _this$state2.consignmentData,\n          isLoadingData = _this$state2.isLoadingData,\n          total = _this$state2.total;\n      var layout = {\n        labelCol: {\n          span: 9\n        },\n        wrapperCol: {\n          span: 15\n        }\n      };\n      return __jsx(\"div\", {\n        className: \"searchform-home-container\"\n      }, __jsx(\"div\", {\n        className: \"searching-form\"\n      }, __jsx(Form, _extends({\n        className: 'searching-box' + (!isHideUserForm && step === 0 ? ' show' : ''),\n        ref: this.formRef\n      }, layout, {\n        name: \"consignment\",\n        initialValues: formData // onFinish={this.onFinish}\n        ,\n        onFinish: this.onConsign,\n        onValuesChange: function onValuesChange(changedValues, allValues) {\n          _this2.setState({\n            formData: _objectSpread({}, formData, changedValues)\n          }, function () {\n            return console.log(_this2.state);\n          });\n        }\n      }), __jsx(Row, {\n        className: \"flex sell-card-form\",\n        justify: \"center\"\n      }, __jsx(\"h1\", {\n        className: 'text text-searching-title'\n      }, \"T\\xECm th\\xF4ng tin k\\xFD g\\u1EEDi qua s\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"), __jsx(Form.Item, {\n        name: \"phoneNumber\",\n        rules: [{\n          required: true,\n          message: 'Vui lòng nhập số điện thoại'\n        }],\n        label: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"\n      }, __jsx(Col, {\n        sm: 24,\n        md: 22\n      }, __jsx(Input, {\n        size: \"small\",\n        type: 'number',\n        id: \"phoneNumber\",\n        key: \"phoneNumber\",\n        onChange: this.changeData,\n        allowClear: true,\n        placeholder: \"...\"\n      }))), __jsx(\"div\", {\n        className: \"flex justify-around align-center\",\n        style: {\n          width: '100%'\n        }\n      }, __jsx(Button, {\n        onClick: this.backProp,\n        type: \"secondary\"\n      }, \"Quay l\\u1EA1i\"), __jsx(Button, {\n        loading: isSearching,\n        type: \"secondary\",\n        htmlType: \"submit\"\n      }, \"T\\xECm ki\\u1EBFm\")))), __jsx(\"div\", {\n        className: 'searching-table' + (isHideUserForm && step === 1 ? ' show' : '')\n      }, __jsx(Table, {\n        size: \"small\",\n        loading: isLoadingData,\n        columns: this.columns,\n        dataSource: consignmentData,\n        bordered: true,\n        pagination: {\n          total: total,\n          pageSize: 20,\n          onChange: this.paginationChange\n        },\n        scroll: {\n          x: 1500,\n          y: '65vh'\n        }\n      }), __jsx(\"div\", {\n        className: \"flex justify-around align-center\",\n        style: {\n          width: '100%'\n        }\n      }, __jsx(Button, {\n        onClick: this.backPropStepOne,\n        type: \"secondary\"\n      }, \"Quay l\\u1EA1i\")))), __jsx(MyModal, {\n        ref: this.myModal\n      }));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(_ref5) {\n        var query;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                query = _ref5.query;\n                return _context5.abrupt(\"return\", {\n                  query: query\n                });\n\n              case 2:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return SearchForm;\n}(React.PureComponent);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    locale: state.locale,\n    userData: state.userData\n  };\n};\n\nexport default withRouter(connect(mapStateToProps)(SearchForm));","map":{"version":3,"sources":["/Users/macbook/Desktop/giveawaypremium-client/pages/Screen/Consignment/components/SearchForm/index.js"],"names":["React","Router","ReduxServices","connect","withRouter","images","isMobile","MyModal","Form","Row","Col","Layout","Input","Button","Spin","Descriptions","Tabs","Table","Radio","Popconfirm","GapService","numberWithCommas","isEmpty","SearchForm","props","page","keyword","formData","state","setState","isLoadingData","getConsignment","phoneNumber","res","console","log","consignmentData","results","map","item","indexItem","push","key","objectId","consignerName","consignmentId","consignerIdCard","consigneeName","timeGetMoney","numberOfProducts","Number","numSoldConsignment","remainNumConsignment","bankName","bankId","moneyBack","email","isGetMoney","total","count","isSearching","length","isHideUserForm","setTimeout","step","fetchTableData","backConsignment","columns","title","width","dataIndex","render","value","fixed","myModal","createRef","layout","labelCol","span","wrapperCol","formRef","onConsign","changedValues","allValues","required","message","changeData","backProp","pageSize","onChange","paginationChange","x","y","backPropStepOne","query","PureComponent","mapStateToProps","locale","userData"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Router } from 'common/routes'\nimport ReduxServices from 'common/redux'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'next/router'\nimport { images } from 'config/images'\nimport { isMobile } from 'react-device-detect'\nimport MyModal from 'pages/Components/MyModal'\nimport { Form, Row, Col, Layout, Input, Button, Spin, Descriptions, Tabs, Table, Radio, Popconfirm } from 'antd'\nimport GapService from 'controller/Api/Services/Gap'\n\nimport './style.scss'\nimport { numberWithCommas } from 'common/function'\nimport { isEmpty } from 'lodash'\n\nclass SearchForm extends React.PureComponent {\n  static async getInitialProps ({ query }) {\n    return { query }\n  }\n  constructor (props) {\n    super(props)\n    this.columns = [\n      {\n        title: 'Tên khách hàng',\n        width: 12,\n        dataIndex: 'consignerName',\n        key: 'consignerName'\n      },\n      {\n        title: 'Mã ký gửi',\n        dataIndex: 'consignmentId',\n        key: 'consignmentId',\n        width: 10\n      },\n      {\n        title: 'SL ký gửi',\n        dataIndex: 'numberOfProducts',\n        key: '3',\n        width: 5\n      },\n      {\n        title: 'Đã bán',\n        dataIndex: 'numSoldConsignment',\n        key: '4',\n        width: 5\n      },\n      {\n        title: 'Còn lại',\n        dataIndex: 'remainNumConsignment',\n        key: '5',\n        width: 5\n      },\n      {\n        title: 'Số tiền trả khách',\n        dataIndex: 'moneyBack',\n        key: '6',\n        width: 10,\n        render: (value) => <span>{value ? numberWithCommas(value) : '0'} đ</span>\n      },\n      {\n        title: 'Thời gian trả tiền',\n        dataIndex: 'timeGetMoney',\n        key: '7',\n        width: 10\n      },\n      {\n        title: 'Chuyển tiền',\n        key: '8',\n        fixed: 'right',\n        width: 6,\n        render: (value) =>\n          this.state.consignmentData.length >= 1 ? (\n            <Radio.Button className={value.isGetMoney ? 'radio-true-isGetMoney' : 'radio-false-isGetMoney'} value={value.isGetMoney}>{value.isGetMoney ? 'Rồi' : 'Chưa'}</Radio.Button>\n          ) : null\n      }\n    ]\n    this.state = {\n      step: 0,\n      formData: {\n        phoneNumber: ''\n      },\n      consignmentData: [],\n      total: 0,\n      page: 1,\n      isSearching: false,\n      isHideUserForm: false,\n      isLoadingData: false\n    }\n\n    this.myModal = React.createRef()\n  }\n\n  componentDidMount () {\n  }\n  componentDidUpdate () {\n  }\n\n  componentWillUnmount () {\n  }\n\n  fetchTableData = async (page = 1, keyword) => {\n    const { formData } = this.state\n    this.setState({\n      isLoadingData: true\n    }, async () => {\n      let res\n\n      res = await GapService.getConsignment(page, formData.phoneNumber)\n\n      console.log('res')\n      console.log(res)\n      let consignmentData = []\n      if (res && res.results) {\n        res.results.map((item, indexItem) => {\n          consignmentData.push({\n            key: item.objectId,\n            objectId: item.objectId,\n            consignerName: item.consignerName,\n            consignmentId: item.consignmentId,\n            consignerIdCard: item.consignerIdCard,\n            consigneeName: item.consigneeName,\n            timeGetMoney: item.timeGetMoney,\n            phoneNumber: item.phoneNumber,\n            numberOfProducts: `${Number(item.numberOfProducts)}`,\n            numSoldConsignment: `${Number(item.numSoldConsignment || 0)}`,\n            remainNumConsignment: `${Number(item.numberOfProducts) - Number(item.numSoldConsignment || 0)}`,\n            bankName: item.bankName,\n            bankId: item.bankId,\n            moneyBack: item.moneyBack,\n            email: item.email,\n            isGetMoney: item.isGetMoney\n          })\n        })\n        this.setState({\n          total: res.count,\n          consignmentData: consignmentData,\n          isLoadingData: false\n        })\n      } else {\n        this.setState({\n          isLoadingData: false\n        })\n      }\n    })\n  }\n\n  onConsign = async () => {\n    const { page, formData } = this.state\n    this.setState({\n      isSearching: true\n    }, async () => {\n      const res = await GapService.getConsignment(page, formData.phoneNumber, 20)\n      console.log('res: ', res)\n\n      if (res && res.results) {\n        this.setState({\n          total: res.results.length,\n          consignmentData: res.results,\n          isHideUserForm: true,\n          isSearching: false\n        }, () => {\n          setTimeout(() => {\n            this.setState({\n              step: 1\n            })\n          }, 1000)\n        })\n      } else {\n        this.setState({\n          isSearching: false\n        })\n      }\n    })\n  }\n\n  paginationChange = (page) => {\n    console.log(page)\n    this.fetchTableData(page)\n  }\n\n  backPropStepOne = () => {\n    this.setState({\n      isHideUserForm: false\n    }, () => {\n      setTimeout(() => {\n        this.setState({\n          step: 0\n        })\n      }, 1000)\n    })\n  }\n\n  backProp = () => {\n    this.setState({\n      step: 0,\n      formData: {\n        phoneNumber: ''\n      },\n      consignmentData: [],\n      total: 0,\n      page: 1,\n      isSearching: false,\n      isHideUserForm: false,\n      isLoadingData: false\n    })\n    this.props.backConsignment()\n  }\n\n  // closeModal = () => {\n  //   this.myModal.current.closeModal()\n  // }\n\n  render () {\n    const { isHideUserForm, formData, step, isSearching, consignmentData, isLoadingData, total } = this.state\n    const layout = {\n      labelCol: { span: 9 },\n      wrapperCol: { span: 15 }\n    }\n\n    return (\n      <div className='searchform-home-container'>\n        <div className='searching-form'>\n\n          <Form\n            className={'searching-box' + (!isHideUserForm && step === 0 ? ' show' : '')}\n            ref={this.formRef}\n            {...layout}\n            name='consignment'\n            initialValues={formData}\n            // onFinish={this.onFinish}\n            onFinish={this.onConsign}\n            onValuesChange={(changedValues, allValues) => {\n              this.setState({\n                formData: {\n                  ...formData,\n                  ...changedValues\n                }\n              }, () => console.log(this.state))\n            }}\n          >\n            <Row className='flex sell-card-form' justify='center'>\n              <h1 className={'text text-searching-title'}>Tìm thông tin ký gửi qua số điện thoại</h1>\n\n              <Form.Item name='phoneNumber' rules={[{ required: true, message: 'Vui lòng nhập số điện thoại' }]} label='Số điện thoại'>\n                <Col sm={24} md={22}>\n                  <Input size='small' type={'number'} id='phoneNumber' key='phoneNumber' onChange={this.changeData} allowClear placeholder='...' />\n                </Col>\n              </Form.Item>\n\n              <div className='flex justify-around align-center' style={{ width: '100%' }}>\n                <Button onClick={this.backProp} type='secondary'>Quay lại</Button>\n                <Button loading={isSearching} type='secondary' htmlType='submit'>Tìm kiếm</Button>\n              </div>\n            </Row>\n          </Form>\n\n          <div className={'searching-table' + (isHideUserForm && step === 1 ? ' show' : '')}>\n            <Table\n              size='small'\n              loading={isLoadingData}\n              columns={this.columns}\n              dataSource={consignmentData}\n              bordered\n              pagination={{\n                total: total,\n                pageSize: 20,\n                onChange: this.paginationChange\n              }}\n              scroll={{ x: 1500, y: '65vh' }}\n            />\n\n            <div className='flex justify-around align-center' style={{ width: '100%' }}>\n              <Button onClick={this.backPropStepOne} type='secondary'>Quay lại</Button>\n            </div>\n          </div>\n        </div>\n        <MyModal ref={this.myModal} />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  locale: state.locale,\n  userData: state.userData\n})\n\nexport default withRouter(connect(mapStateToProps)(SearchForm))\n"]},"metadata":{},"sourceType":"module"}